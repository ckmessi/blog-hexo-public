<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>不止是一位程序员</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Lionel的技术笔记总结">
<meta property="og:type" content="website">
<meta property="og:title" content="不止是一位程序员">
<meta property="og:url" content="http://ckmessi.github.io/page/4/index.html">
<meta property="og:site_name" content="不止是一位程序员">
<meta property="og:description" content="Lionel的技术笔记总结">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="不止是一位程序员">
<meta name="twitter:description" content="Lionel的技术笔记总结">
  
    <link rel="alternate" href="/blog-hexo/atom.xml" title="不止是一位程序员" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/blog-hexo/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog-hexo/" id="logo">不止是一位程序员</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/blog-hexo/" id="subtitle">Lionel的技术空间</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog-hexo/">Home</a>
        
          <a class="main-nav-link" href="/blog-hexo/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog-hexo/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Suche"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://ckmessi.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-初识YAML文件格式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-hexo/2019/08/29/初识YAML文件格式/" class="article-date">
  <time datetime="2019-08-29T11:16:32.000Z" itemprop="datePublished">2019-08-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-hexo/categories/后台/">后台</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-hexo/2019/08/29/初识YAML文件格式/">初识YAML文件格式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p><code>YAML</code> 是一种可读性较高的用来表示数据序列化的格式，它参考了包括C语言和Python等在内的语言，有趣的是其缩写 <code>YAML</code> 的含义是 <code>YAML Ain&#39;t a Markup Language</code> （YAML 不是一种标记语言）。</p>
<p>通常在 Spring Boot 框架中，会使用 <code>.yaml</code> 格式的文件定义配置信息。<br>在 Python 中也经常使用到，比如一个开源框架 <a href="https://github.com/NervanaSystems/distiller" target="_blank" rel="external">Distiller</a> 就使用 YAML 文件定义压缩策略。</p>
<h2 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h2><p>YAML 文件基本的语法格式是以缩进代表层级关系，用冒号进行键值的分隔。</p>
<ul>
<li>YAML 内容大小写敏感；</li>
<li>缩进只能使用空格，不能使用 <code>tab</code> 缩进符号；</li>
<li>需要保持相同层级的左对齐，一般2个或4个空格；</li>
</ul>
<p>YAML 文件中允许表示三种格式：常量值、对象和数组。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">object1:</div><div class="line">    attribute1: value1</div><div class="line">    attribute2: value2</div><div class="line">constant: value</div><div class="line">list:</div><div class="line">    - element1</div><div class="line">    - element2</div></pre></td></tr></table></figure></p>
<p>使用不断缩进的层次代表对象属性嵌套，使用冒号分隔键和值，使用短橫线加一个空格代表一个数组项。</p>
<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p>通常使用 <code>#</code> 符号标识一行注释，在 YAML 文件中只有行注释。</p>
<h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><p>YAML 还有一些特殊符号，比如 <code>---</code> 可以在一个YAML 文件中表示文档的开始和结束，分割不同的内容。<br>不过对于大多数配置文件而言，使用基础的上述格式语法，就能描述清楚配置项的定义。</p>
<p>更多关于 YAML 文件格式的相关内容，可以参考 <a href="https://yaml.org/spec/1.2/spec.pdf" target="_blank" rel="external">官方文档</a>。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://www.jianshu.com/p/97222440cd08" target="_blank" rel="external">https://www.jianshu.com/p/97222440cd08</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ckmessi.github.io/2019/08/29/初识YAML文件格式/" data-id="ckaqi87wi00cgsh8tyyrd12jl" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/YAML/">YAML</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Laravel使用Nginx作为代理服务器时的两点注意事项" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-hexo/2019/08/28/Laravel使用Nginx作为代理服务器时的两点注意事项/" class="article-date">
  <time datetime="2019-08-28T08:18:50.000Z" itemprop="datePublished">2019-08-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-hexo/categories/后台/">后台</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-hexo/2019/08/28/Laravel使用Nginx作为代理服务器时的两点注意事项/">Laravel使用Nginx作为代理服务器时的两点注意事项</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>如果使用 nginx 作为代理服务器，将 Laravel 项目部署在内网服务器，有两点需要注意的事项 。</p>
<h2 id="内网HOST为公网HOST"><a href="#内网HOST为公网HOST" class="headerlink" title="内网HOST为公网HOST"></a>内网HOST为公网HOST</h2><p>有时候内网后台服务器返回资源路径时，会将自己的 HOST 拼接到相对路径上返回给前端。<br>在这种情况下，如果经过了 nginx 转发，则这个资源全路径将是内网路径，无法在外网访问。<br>这时候需要注意在 nginx 的代理转发过程中，将当前的 HOST 带过去。<br>在 nginx 配置中，添加 <code>proxy_set_heaer Host $http_host</code> ：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    ...</div><div class="line">    location / &#123;</div><div class="line">                proxy_set_header Host $http_host;</div><div class="line">                proxy_pass http://192.168.0.38:8001;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这样在 Laravel 项目中，使用 <code>HTTP_HOST</code> 获取到的就是公网 IP + 端口的形式。</p>
<h2 id="后台获取真实的客户端IP"><a href="#后台获取真实的客户端IP" class="headerlink" title="后台获取真实的客户端IP"></a>后台获取真实的客户端IP</h2><p>默认情况下，在内网服务器后台获取到的客户端地址将会是代理服务器主机地址。<br>为了得到真实的客户端 IP 地址，需要执行以下两步操作：</p>
<p>第一，需要修改 nginx 的配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    ...</div><div class="line">    location / &#123;</div><div class="line">                proxy_set_header Host $http_host;</div><div class="line">                proxy_set_header x-forwarded-for $remote_addr;</div><div class="line">                proxy_pass http://192.168.0.38:8001;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这个语句能够在 HEADER 中添加一项 X-FORWARDED-FOR，对应在 Laravel 项目中可以使用的 $_SERVER[‘HTTP_X-FORWARDED-FOR’] 获取到直实的客户端IP。</p>
<p>第二，在 Laravel 需要在使用 <code>$request-&gt;ip</code> 之前，调用 <code>setTrustedProxies([&#39;xxx.xxx.xxx.xxx])</code> 方法设置信赖的代理服务器地址。如果没有设置的话， <code>$request-&gt;ip</code> 得到的是 <code>$_SERVER[&#39;REMOTE_ADDR&#39;]</code> 变量，即代理服务器相对于内网服务器的地址（比如 <code>192.168.0.244</code>）。</p>
<p>参考 <code>Symfony\Component\HttpFoundation\Request</code> 的 <code>getClientIp</code> 源码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line">     * Returns the client IP address.</div><div class="line">     *</div><div class="line">     * This method can read the client IP address from the &quot;X-Forwarded-For&quot; header</div><div class="line">     * when trusted proxies were set via &quot;setTrustedProxies()&quot;. The &quot;X-Forwarded-For&quot;</div><div class="line">     * header value is a comma+space separated list of IP addresses, the left-most</div><div class="line">     * being the original client, and each successive proxy that passed the request</div><div class="line">     * adding the IP address where it received the request from.</div><div class="line">     *</div><div class="line">     * If your reverse proxy uses a different header name than &quot;X-Forwarded-For&quot;,</div><div class="line">     * (&quot;Client-Ip&quot; for instance), configure it via the $trustedHeaderSet</div><div class="line">     * argument of the Request::setTrustedProxies() method instead.</div><div class="line">     *</div><div class="line">     * @return string|null The client IP address</div><div class="line">     *</div><div class="line">     * @see getClientIps()</div><div class="line">     * @see http://en.wikipedia.org/wiki/X-Forwarded-For</div><div class="line">     */</div><div class="line">    public function getClientIp()</div><div class="line">    &#123;</div><div class="line">        $ipAddresses = $this-&gt;getClientIps();</div><div class="line">        return $ipAddresses[0];</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>可以看到 Doc 中提到，如果通过 <code>setTrustedProxies</code> 方法设置了依赖的代理服务器，这个方法将从 <code>X-Forwarded-For</code> 请求头信息中读取客户端 IP 地址。 <code>X-Forwarded-For</code> 值通常是逗号+空格分隔的 IP 地址列表，最左侧是最初的客户端，每一个传递请求的代理都将它们收到请求的客户端地址逐个添加。</p>
<p>再阅读 <code>Symfony\Component\HttpFoundation\Request</code> 的 <code>getClientIps</code> 源码可知，默认会使用 <code>REMOTE_ADDR</code> 作为客户端的IP地址，如果不是从依赖的代理服务器而来，则直接返回了：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">public function getClientIps()</div><div class="line">    &#123;</div><div class="line">        $ip = $this-&gt;server-&gt;get(&apos;REMOTE_ADDR&apos;);</div><div class="line">        if (!$this-&gt;isFromTrustedProxy()) &#123;</div><div class="line">            return array($ip);</div><div class="line">        &#125;</div><div class="line">        return $this-&gt;getTrustedValues(self::HEADER_CLIENT_IP, $ip) ?: array($ip);</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>后续获到数据方法的第一个参数 <code>self::HEADER_CLIENT_IP</code> 的值，就是 <code>X_FORWARDED_FOR</code> ：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">protected static $trustedHeaders = array(</div><div class="line">    self::HEADER_FORWARDED =&gt; &apos;FORWARDED&apos;,</div><div class="line">    self::HEADER_CLIENT_IP =&gt; &apos;X_FORWARDED_FOR&apos;,</div><div class="line">    self::HEADER_CLIENT_HOST =&gt; &apos;X_FORWARDED_HOST&apos;,</div><div class="line">    self::HEADER_CLIENT_PROTO =&gt; &apos;X_FORWARDED_PROTO&apos;,</div><div class="line">    self::HEADER_CLIENT_PORT =&gt; &apos;X_FORWARDED_PORT&apos;,</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>添加上述两步后，使用 <code>$request-&gt;ip()</code> 得到的就是真实的客户端地址。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://stackoverflow.com/questions/33268683/how-to-get-client-ip-address-in-laravel-5" target="_blank" rel="external">https://stackoverflow.com/questions/33268683/how-to-get-client-ip-address-in-laravel-5</a></li>
<li><a href="https://imququ.com/post/x-forwarded-for-header-in-http.html" target="_blank" rel="external">https://imququ.com/post/x-forwarded-for-header-in-http.html</a></li>
<li><a href="https://learnku.com/laravel/t/2763/about-request-getclientips-to-get-some-real-ip-questions" target="_blank" rel="external">https://learnku.com/laravel/t/2763/about-request-getclientips-to-get-some-real-ip-questions</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ckmessi.github.io/2019/08/28/Laravel使用Nginx作为代理服务器时的两点注意事项/" data-id="ckaqi87tb004fsh8twh1trcbt" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Laravel/">Laravel</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/PHP/">PHP</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-最简单的Go测试代码样例" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-hexo/2019/08/19/最简单的Go测试代码样例/" class="article-date">
  <time datetime="2019-08-19T07:34:19.000Z" itemprop="datePublished">2019-08-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-hexo/categories/后台/">后台</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-hexo/2019/08/19/最简单的Go测试代码样例/">最简单的Go测试代码样例</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>配置好 Go 语言的开发环境后，可以运行起一个最简单的 Hello, World 程序：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">package main</div><div class="line">import &quot;fmt&quot;</div><div class="line">func main() &#123;</div><div class="line">    fmt.Println(&quot;Hello, world&quot;)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在命令行运行代码，可以看到标准的入门输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ go run hello.go</div><div class="line">Hello, world</div></pre></td></tr></table></figure></p>
<h2 id="基础测试"><a href="#基础测试" class="headerlink" title="基础测试"></a>基础测试</h2><p>接下来我们尝试写一个最基础的测试代码。首先将源代码中的输出内容部分抽取出一个方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">package main</div><div class="line">import &quot;fmt&quot;</div><div class="line">func Hello() string &#123;</div><div class="line">    return &quot;Hello, world&quot;</div><div class="line">&#125;</div><div class="line">func main() &#123;</div><div class="line">    fmt.Println(Hello())</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后撰写基础的测试代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">package main</div><div class="line">import &quot;testing&quot;</div><div class="line">func TestHello(t *testing.T) &#123;</div><div class="line">    got := Hello()</div><div class="line">    want := &quot;Hello, world&quot;</div><div class="line">    if got != want &#123;</div><div class="line">        t.Errorf(&quot;got %q want %q&quot;, got, want)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在撰写测试代码的过程中，有一些原则需要遵循：</p>
<ul>
<li>测试文件名称是 <code>xxx_test.go</code></li>
<li>测试方法必须以 <code>Test</code> 开头</li>
<li>测试方法接收且仅接收一个参数 <code>t *testing.T</code></li>
</ul>
<h2 id="进阶：在方法中添加参数"><a href="#进阶：在方法中添加参数" class="headerlink" title="进阶：在方法中添加参数"></a>进阶：在方法中添加参数</h2><p>修改原方法内容为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">const englishHelloPrefix = &quot;Hello, &quot;</div><div class="line">func Hello(name string) string &#123;</div><div class="line"> return englishHelloPrefix + name</div><div class="line">&#125;</div><div class="line">...</div></pre></td></tr></table></figure></p>
<p>对应修改测试代码为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">func TestHello(t *testing.T) &#123;</div><div class="line">    got := Hello(&quot;Chris&quot;)</div><div class="line">    want := &quot;Hello, Chris&quot;</div><div class="line">    if got != want &#123;</div><div class="line">        t.Errorf(&quot;got %q want %q&quot;, got, want)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这样可以实现一个根据不同参数进行结果校验的测试。</p>
<h2 id="子测试集合"><a href="#子测试集合" class="headerlink" title="子测试集合"></a>子测试集合</h2><p>测试工具库中还有另一个工具：子测试。有时它对于围绕某一件事的群组测试很有用，能够描述不同的场景。<br>有些文档在描述子测试时将其描述为测试兵库厂中的一个工具（another tool in testing arsenal, subtests.），其中有一个熟悉的词汇 <code>arsenal</code> 。<br>将测试代码修改如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">package main</div><div class="line">import &quot;testing&quot;</div><div class="line">func TestHello(t *testing.T) &#123;</div><div class="line"></div><div class="line"> t.Run(&quot;saying hello to people&quot;, func(t *testing.T) &#123;</div><div class="line">  got := Hello(&quot;Chris&quot;)</div><div class="line">  want := &quot;Hello, Chris&quot;</div><div class="line">  if got != want &#123;</div><div class="line">   t.Errorf(&quot;got %q want %q&quot;, got, want)</div><div class="line">  &#125;</div><div class="line"> &#125;)</div><div class="line"></div><div class="line"> t.Run(&quot;say &apos;Hello, world&apos; when an empty string is supplied&quot;, func(t *testing.T) &#123;</div><div class="line">  got := Hello(&quot;&quot;)</div><div class="line">  want := &quot;Hello, World&quot;</div><div class="line">  if got != want &#123;</div><div class="line">   t.Errorf(&quot;got %q want %q&quot;, got, want)</div><div class="line">  &#125;</div><div class="line"> &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>有一种便利的方法可以将共用的代码统一起来：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">func TestHello(t *testing.T) &#123;</div><div class="line"></div><div class="line"> assertCorrectMessage := func(t *testing.T, got, want string) &#123;</div><div class="line">        t.Helper()</div><div class="line">        if got != want &#123;</div><div class="line">            t.Errorf(&quot;got %q want %q&quot;, got, want)</div><div class="line">        &#125;</div><div class="line"> &#125;</div><div class="line"></div><div class="line"> t.Run(&quot;saying hello to people&quot;, func(t *testing.T) &#123;</div><div class="line">  got := Hello(&quot;Chris&quot;)</div><div class="line">  want := &quot;Hello, Chris&quot;</div><div class="line">  assertCorrectMessage(t, got ,want)</div><div class="line"> &#125;)</div><div class="line"></div><div class="line"> t.Run(&quot;say &apos;Hello, world&apos; when an empty string is supplied&quot;, func(t *testing.T) &#123;</div><div class="line">  got := Hello(&quot;&quot;)</div><div class="line">  want := &quot;Hello, World&quot;</div><div class="line">  assertCorrectMessage(t, got ,want)</div><div class="line"> &#125;)</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>t.Helper()</code> 是必须的，用来告诉测试组件这个方法是一个辅助方法。这样当失败的时候，报告的行号就是调用方法的行号，而不是辅助函数内部的行号。</p>
<p>将原方法逻辑进行修改，确保测试通过：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">const englishHelloPrefix = &quot;Hello, &quot;</div><div class="line">func Hello(name string) string &#123;</div><div class="line"> if name == &quot;&quot; &#123;</div><div class="line">  name = &quot;World&quot;</div><div class="line"> &#125;</div><div class="line"> return englishHelloPrefix + name</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="测试流程总结"><a href="#测试流程总结" class="headerlink" title="测试流程总结"></a>测试流程总结</h2><p>撰写测试代码时，通常会按照如下流程进行：</p>
<ul>
<li>撰写测试</li>
<li>确保编译通过</li>
<li>运行测试，看看它是否失败，检查错误信息是否有意义</li>
<li>修改代码使测试通过</li>
<li>重构</li>
</ul>
<p>最终保证测试通过，减少人工检查修改的代码是否对现有的逻辑造成不良影响的工作量。</p>
<h2 id="参考链接："><a href="#参考链接：" class="headerlink" title="参考链接："></a>参考链接：</h2><p><a href="https://github.com/quii/learn-go-with-tests/blob/master/hello-world.md" target="_blank" rel="external">https://github.com/quii/learn-go-with-tests/blob/master/hello-world.md</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ckmessi.github.io/2019/08/19/最简单的Go测试代码样例/" data-id="ckaqi87x400drsh8tmrl8zg3v" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Go/">Go</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-初识Docker" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-hexo/2019/08/16/初识Docker/" class="article-date">
  <time datetime="2019-08-16T07:54:05.000Z" itemprop="datePublished">2019-08-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-hexo/categories/后台/">后台</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-hexo/2019/08/16/初识Docker/">初识Docker</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Docker-简介"><a href="#Docker-简介" class="headerlink" title="Docker 简介"></a>Docker 简介</h2><p>Docker 是一种应用容器引擎，它能够将所有代码以及依赖都打包完成的软件单元，这样软件就可以可靠地从一个计算环境转移到另外一个环境中快速运行。Docker 容器镜像是一个轻量级的、独立运行的、可执行的软件包，包括了所有运行一个应用程序的所有内容：代码、运行时依赖、系统工具、系统包和设置信息。</p>
<p>对于基于 Linux 和 Windows 的应用程序，容器化软件的运行将保持一致，不受底层架构的影响。容器将软件与它所在的环境隔离，确保实例在开发和上线时尽管环境不同，但行为保持一致。</p>
<h2 id="Docker环境配置"><a href="#Docker环境配置" class="headerlink" title="Docker环境配置"></a>Docker环境配置</h2><p>在 Ubuntu 16.04 下安装 Docker 的方式可以直接使用 <code>apt-get</code> 安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install docker.io</div></pre></td></tr></table></figure></p>
<p>安装完成后使用 <code>docker -v</code> 查看版本，如果显示出版本号则说明安装完成：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">➜ ~ docker -v</div><div class="line">Docker version 18.09.7, build 2d0083d</div></pre></td></tr></table></figure></p>
<p>默认情况下使用大多数 docker 命令需要有 sudo 权限，如果不希望这样，则需要将当前用户加入到 docker 的组中：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">usermod -a -G docker [username]</div></pre></td></tr></table></figure></p>
<h2 id="容器和镜像的概念"><a href="#容器和镜像的概念" class="headerlink" title="容器和镜像的概念"></a>容器和镜像的概念</h2><p>容器和镜像的概念很类似于对象和实例的关系，镜像是一个持久化存储的快照，而容器则是镜像运行时的一个实例。<br>通常来说一个镜像可以被拷贝到不同的机器上用于创建容器，即使在同一台机器上，同一个镜像也可以生成不同的容器分别运行。</p>
<p>在 Docker 中查看镜像列表的命令是 <code>docker image ls</code> ：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">➜ ~ docker image ls</div><div class="line">REPOSITORY TAG IMAGE ID CREATED SIZE</div><div class="line">mysql 5.6 732765f8c7d2 2 days ago 257MB</div><div class="line">ubuntu 16.04 5e13f8dd4c1a 3 weeks ago 120M</div><div class="line">➜ ~</div></pre></td></tr></table></figure></p>
<p>可以看出镜像具有的基本属性是 <code>名称</code>、<code>版本标签</code>、<code>IMAGE_ID</code>、<code>创建时间</code>、<code>容量</code>等。<br>通常使用镜像构建或镜像导入的方式创建镜像，通过 <code>docker rmi [IMAGE_ID]</code> 删除镜像。</p>
<p>在 Docker 中查看容器列表的命令是 <code>docker ps -a</code> ：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">➜ ~ docker ps -a</div><div class="line">CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES</div><div class="line">e6ab6136734a dockertest_patronum &quot;docker-php-entrypoi…&quot; 22 hours ago Exited (0) 22 hours ago dockertest_patronum_1</div><div class="line">06e3307bcdde nginx:1.10.3 &quot;nginx -g &apos;daemon of…&quot; 22 hours ago Exited (0) 22 hours ago chenkai_nginx_d</div><div class="line">e4ba5fd49174 mysql:5.6 &quot;docker-entrypoint.s…&quot; 23 hours ago Exited (0) 23 hours ago chenkai_mysql_d</div><div class="line">➜ ~</div></pre></td></tr></table></figure></p>
<p>可以看出容器具有的基本属性是 <code>CONTAINER_ID</code>、<code>镜像名称</code>、<code>启动命令</code>、<code>创建时间</code>、<code>状态</code>等。<br>通常运行镜像会创建容器，通过 <code>docker rm [CONTAINER_ID]</code> 可以删除容器。</p>
<h2 id="入门使用"><a href="#入门使用" class="headerlink" title="入门使用"></a>入门使用</h2><p>使用 <code>docker pull [image]</code> 可以拉取一个镜像。<br>比如，从官方 Hub 下载一个镜像：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">➜ docker-test sudo docker pull hello-world</div><div class="line">Using default tag: latest</div><div class="line">latest: Pulling from library/hello-world</div><div class="line">1b930d010525: Pull complete </div><div class="line">Digest: sha256:6540fc08ee6e6b7b63468dc3317e3303aae178cb8a45ed3123180328bcc1d20f</div><div class="line">Status: Downloaded newer image for hello-world:latest</div></pre></td></tr></table></figure></p>
<p>再使用 <code>docker image ls</code> 查看当前镜像列表：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">➜ ~ docker image ls</div><div class="line">REPOSITORY TAG IMAGE ID CREATED SIZE</div><div class="line">ubuntu latest 3556258649b2 3 weeks ago 64.2MB</div><div class="line">hello-world latest fce289e99eb9 7 months ago 1.84kB</div><div class="line">➜ ~</div></pre></td></tr></table></figure></p>
<p>可以看到列表中多了一项仓库名称为 <code>hello-world</code> 的镜像，版本标签版本默认为 <code>latest</code>，有 <code>IMAGE_ID</code>、创建时间、容量大小等属性。</p>
<p>使用 <code>docker run [image]</code> 可以运行一个镜像：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">➜ ~ sudo docker run hello-world                          </div><div class="line"></div><div class="line">Hello from Docker!</div><div class="line">This message shows that your installation appears to be working correctly.</div><div class="line"></div><div class="line">To generate this message, Docker took the following steps:</div><div class="line"> 1. The Docker client contacted the Docker daemon.</div><div class="line"> 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.</div><div class="line">    (amd64)</div><div class="line"> 3. The Docker daemon created a new container from that image which runs the</div><div class="line">    executable that produces the output you are currently reading.</div><div class="line"> 4. The Docker daemon streamed that output to the Docker client, which sent it</div><div class="line">    to your terminal.</div><div class="line"></div><div class="line">To try something more ambitious, you can run an Ubuntu container with:</div><div class="line"> $ docker run -it ubuntu bash</div><div class="line"></div><div class="line">Share images, automate workflows, and more with a free Docker ID:</div><div class="line"> https://hub.docker.com/</div><div class="line"></div><div class="line">For more examples and ideas, visit:</div><div class="line"> https://docs.docker.com/get-started/</div><div class="line"></div><div class="line">➜ ~</div></pre></td></tr></table></figure></p>
<h2 id="制作一个镜像并运行"><a href="#制作一个镜像并运行" class="headerlink" title="制作一个镜像并运行"></a>制作一个镜像并运行</h2><p>首先创建一个文件 <code>hello.c</code>，输入以下内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#include&lt;stdio.h&gt;</div><div class="line">int main()</div><div class="line">&#123;</div><div class="line"> printf(&quot;hello docker, my first docker image.\n&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>使用 <code>gcc</code> 编译并生成可执行文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gcc -static hello.c -o hello</div></pre></td></tr></table></figure></p>
<p>现在目录下有一个 <code>hello</code> 文件，可以直接使用 <code>./hello</code> 执行它可以看到命令行输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hello docker, my first docker image.</div></pre></td></tr></table></figure></p>
<p>现在开始将这个可执行程序打包进容器中，创建一个文本文件，命名为 <code>Dockerfile</code>，内容如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">FROM scratch</div><div class="line">ADD hello /</div><div class="line">CMD [&quot;/hello&quot;]</div></pre></td></tr></table></figure></p>
<p>使用命令构建镜像：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker build -t my/hello .</div></pre></td></tr></table></figure></p>
<p>此时使用 <code>docker image ls</code> 命令可以发现多了一个镜像 <code>my/hello</code>。</p>
<p>使用命令 <code>docker run [image]</code> 可以执行一个镜像：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">➜ docker-test sudo docker run my/hello</div><div class="line">hello docker, my first docker image.</div></pre></td></tr></table></figure></p>
<p>这样就实现了一个基本的从构建镜像到运行镜像的完整流程。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://www.docker.com" target="_blank" rel="external">https://www.docker.com</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ckmessi.github.io/2019/08/16/初识Docker/" data-id="ckaqi87wg00ccsh8t67bjlqaa" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Docker/">Docker</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Maven项目pom-xml文件中packaging配置" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-hexo/2019/08/14/Maven项目pom-xml文件中packaging配置/" class="article-date">
  <time datetime="2019-08-14T07:37:43.000Z" itemprop="datePublished">2019-08-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-hexo/categories/后台/">后台</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-hexo/2019/08/14/Maven项目pom-xml文件中packaging配置/">Maven项目pom.xml文件中packaging配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在 Maven 项目的 <code>pom.xml</code> 文件中，有一些配置为 <code>packaging</code>，这个配置给出项目的打包类型。<br>任何一个 Maven 项目都需要定义 <code>packaging</code> 表示项目的打包方式。在没有指定 <code>packaging</code> 的默认情况下，它的配置值为 <code>jar</code> 。<br>常用的 <code>packaging</code> 取值有：</p>
<ul>
<li>pom</li>
<li>jar</li>
<li>war</li>
<li>maven-plugin</li>
<li>ejb</li>
<li>ear</li>
<li>rar</li>
</ul>
<p>不同的 <code>packaging</code> 方式会在 Maven 项目构建过程中执行不同的生命周期插件。<br>前三种方式比较常用，使用 <code>pom</code> 打包类型通常是父级项目使用的类型，使用 <code>jar</code> 则是打包为内部调用或作为服务使用，使用 <code>war</code> 则打包出一个需要手动部署的项目。</p>
<p>对于 Spring Boot 而言，通常只会使用 <code>jar</code> 而不会使用 <code>war</code> ，这是因为 Spring Boot 的特性是内置容器，打包为 <code>jar</code> 后会自动将 Tomcat 打进 Jar 包内，直接运行即可；而如果打包成 <code>war</code> 则需要手动配置额外的 Tomcat 或 Nginx 相关容器，用于部署生成的 War 包。<br>当然也有例外，如果微服务较多，且统一进行部署的话，将打包类型设置成 <code>war</code> 能够减少生成代码的容量，并将所有打包出来的项目放置在同一个 Tomcat 下运行。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://blog.csdn.net/taiyangdao/article/details/52357132" target="_blank" rel="external">https://blog.csdn.net/taiyangdao/article/details/52357132</a><br><a href="https://maven.apache.org/pom.html" target="_blank" rel="external">https://maven.apache.org/pom.html</a><br><a href="https://maven.apache.org/ref/3.6.1/maven-core/default-bindings.html" target="_blank" rel="external">https://maven.apache.org/ref/3.6.1/maven-core/default-bindings.html</a><br><a href="https://www.cnblogs.com/seven717/p/9802813.html" target="_blank" rel="external">https://www.cnblogs.com/seven717/p/9802813.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ckmessi.github.io/2019/08/14/Maven项目pom-xml文件中packaging配置/" data-id="ckaqi87tp005msh8t896kryw3" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Maven/">Maven</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-使用MyBatisPlus操作数据库" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-hexo/2019/08/12/使用MyBatisPlus操作数据库/" class="article-date">
  <time datetime="2019-08-12T12:29:00.000Z" itemprop="datePublished">2019-08-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-hexo/categories/后台/">后台</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-hexo/2019/08/12/使用MyBatisPlus操作数据库/">使用MyBatisPlus操作数据库</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>使用过 Laravel 框架后，会很喜欢其中 Eloquent 类对数据库操作的封装，各种数据库操作变得简洁便捷。<br>使用 Java 的 Spring Boot 框架后，发现 MyBatis 自身实在太难用了，要写好多好多比较原始的 SQL 语句。<br>后来发现有一个很棒的框架 <a href="https://mp.baomidou.com/" target="_blank" rel="external">MyBatis-Plus</a>，能够简化开发过程中繁琐的操作，使数据库的 CRUD 操作变得非常容易。</p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>下面以 MySQL 数据库为例，简单介绍如何使用 MyBatisPlus 操作数据库。</p>
<h4 id="POM依赖"><a href="#POM依赖" class="headerlink" title="POM依赖"></a>POM依赖</h4><p>对于 Maven 项目，在 <code>.pom</code> 文件中添加依赖包：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;dependency&gt;</div><div class="line">    &lt;groupId&gt;com.baomidou&lt;/groupId&gt;</div><div class="line">    &lt;artifactId&gt;mybatis-plus&lt;/artifactId&gt;</div><div class="line">    &lt;version&gt;3.1.2&lt;/version&gt;</div><div class="line">&lt;/dependency&gt;</div><div class="line">  &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;com.baomidou&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;3.1.2&lt;/version&gt;</div><div class="line">  &lt;/dependency&gt;</div></pre></td></tr></table></figure></p>
<h4 id="数据库配置"><a href="#数据库配置" class="headerlink" title="数据库配置"></a>数据库配置</h4><p>在 <code>application.yml</code> 文件中添加数据库相关配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">spring:</div><div class="line">  datasource:</div><div class="line">    username: username</div><div class="line">    password: password</div><div class="line">    url: jdbc:mysql://localhost:3306/SpringTestDB?serverTimezone=UTC</div><div class="line">    driver-class-name: com.mysql.cj.jdbc.Driver</div></pre></td></tr></table></figure></p>
<h4 id="Mapper包扫描配置"><a href="#Mapper包扫描配置" class="headerlink" title="Mapper包扫描配置"></a>Mapper包扫描配置</h4><p>在 Spring Boot 启动类 <code>ApplicationStarter</code> 中添加 Mapper 文件夹扫描位置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@SpringBootApplication</div><div class="line">@MapperScan(&quot;com.ckmessi.samples.demo.mapper&quot;)</div><div class="line">public class ApplicationStarter &#123;</div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        SpringApplication.run(ApplicationStarter.class, args);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="实体类"><a href="#实体类" class="headerlink" title="实体类"></a>实体类</h4><p>创建一个实体类 <code>User.java</code>，这里使用了 <a href="https://www.projectlombok.org/" target="_blank" rel="external">Lombok</a> 注解。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@Data</div><div class="line">public class User &#123;</div><div class="line">    private Long id;</div><div class="line">    private String name;</div><div class="line">    private Integer age;</div><div class="line">    private String email;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="Mapper类"><a href="#Mapper类" class="headerlink" title="Mapper类"></a>Mapper类</h4><p>撰写实体类对应的 Mapper 类 <code>UserMapper.java</code>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">public interface UserMapper extends BaseMapper&lt;User&gt; &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>注意这里最关键的就是继承了 <code>BaseMapper&lt;User&gt;</code> ，这个类的路径其实是 <code>com.baomidou.mybatisplus.core.mapper.BaseMapper</code>。<br>类比于 Laravel 框架中，就是创建实体类后继承了 <code>Illuminate\Database\Eloquent\Model</code>，只不过在 Spring Boot 框架中将 <code>模型定义</code> 和 <code>对模型的数据库操作</code> 切分开，分别放在实体类和其对应的 Mapper 文件中。</p>
<h2 id="开始使用MyBatisPlus"><a href="#开始使用MyBatisPlus" class="headerlink" title="开始使用MyBatisPlus"></a>开始使用MyBatisPlus</h2><p>创建数据库并填充相关数据后，直接创建一个测试文件，内容中撰写对数据库的查询操作：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">@RunWith(SpringRunner.class)</div><div class="line">@SpringBootTest</div><div class="line">public class SampleTest &#123;</div><div class="line">    @Autowired</div><div class="line">    private UserMapper userMapper;</div><div class="line">    @Test</div><div class="line">    public void testSelect() &#123;</div><div class="line">        System.out.println((&quot;----- selectAll method test ------&quot;));</div><div class="line">        List&lt;User&gt; userList = userMapper.selectList(null);</div><div class="line">        userList.forEach(System.out::println);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>可以看到，使用 <code>userMapper.selectList(null)</code> 操作就可以取出 <code>User</code> 表中所有数据。<br>如果要在查询的时候设置相关的条件，可以在这个方法的参数 <code>Wrapper</code> 类中设置。</p>
<p>类似的，查看 <code>BaseMapper</code> 类的定义，可以看到许多 Laravel Eloquent 中熟悉的方法：</p>
<ul>
<li>insert </li>
<li>deleteById</li>
<li>delete</li>
<li>update</li>
<li>selectById</li>
<li>…</li>
</ul>
<h2 id="CRUD-接口"><a href="#CRUD-接口" class="headerlink" title="CRUD 接口"></a>CRUD 接口</h2><h4 id="Mapper-CRUD-接口"><a href="#Mapper-CRUD-接口" class="headerlink" title="Mapper CRUD 接口"></a>Mapper CRUD 接口</h4><p>在 <code>BaseMapper</code> 接口中定义了通用的 CRUD 接口，我们可以快速使用进行数据库操作。</p>
<h6 id="insert"><a href="#insert" class="headerlink" title="insert"></a>insert</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * &lt;p&gt;</div><div class="line"> * 插入一条记录</div><div class="line"> * &lt;/p&gt;</div><div class="line"> *</div><div class="line"> * @param entity 实体对象</div><div class="line"> * @return 插入成功记录数</div><div class="line"> */</div><div class="line">int insert(T entity);</div></pre></td></tr></table></figure>
<h6 id="deleteById"><a href="#deleteById" class="headerlink" title="deleteById"></a>deleteById</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * &lt;p&gt;</div><div class="line"> * 根据 ID 删除</div><div class="line"> * &lt;/p&gt;</div><div class="line"> *</div><div class="line"> * @param id 主键ID</div><div class="line"> * @return 删除成功记录数</div><div class="line"> */</div><div class="line">int deleteById(Serializable id);</div></pre></td></tr></table></figure>
<h6 id="updateById"><a href="#updateById" class="headerlink" title="updateById"></a>updateById</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * &lt;p&gt;</div><div class="line"> * 根据 ID 修改</div><div class="line"> * &lt;/p&gt;</div><div class="line"> *</div><div class="line"> * @param entity 实体对象</div><div class="line"> * @return 修改成功记录数</div><div class="line"> */</div><div class="line">int updateById(@Param(Constants.ENTITY) T entity);</div></pre></td></tr></table></figure>
<h6 id="selectById"><a href="#selectById" class="headerlink" title="selectById"></a>selectById</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * &lt;p&gt;</div><div class="line"> * 根据 ID 查询</div><div class="line"> * &lt;/p&gt;</div><div class="line"> *</div><div class="line"> * @param id 主键ID</div><div class="line"> * @return 实体</div><div class="line"> */</div><div class="line">T selectById(Serializable id);</div></pre></td></tr></table></figure>
<h4 id="Service-CRUD-接口"><a href="#Service-CRUD-接口" class="headerlink" title="Service CRUD 接口"></a>Service CRUD 接口</h4><p>在 <code>IService</code> 接口中定义了通用的 CRUD 接口，可以创建自己的 Service 基类继承 Mybatis-Plus 提供的基类。<br>Service CRUD 接口是在 BaseMapper 接口上的进一步封装，可以看作一系列更自定义的数据库操作。</p>
<h6 id="save"><a href="#save" class="headerlink" title="save"></a>save</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * &lt;p&gt;</div><div class="line"> * 插入一条记录（选择字段，策略插入）</div><div class="line"> * &lt;/p&gt;</div><div class="line"> *</div><div class="line"> * @param entity 实体对象</div><div class="line"> */</div><div class="line">boolean save(T entity);</div></pre></td></tr></table></figure>
<h6 id="saveOrUpdate"><a href="#saveOrUpdate" class="headerlink" title="saveOrUpdate"></a>saveOrUpdate</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * &lt;p&gt;</div><div class="line"> * TableId 注解存在更新记录，否插入一条记录</div><div class="line"> * &lt;/p&gt;</div><div class="line"> *</div><div class="line"> * @param entity 实体对象</div><div class="line"> */</div><div class="line">boolean saveOrUpdate(T entity);</div></pre></td></tr></table></figure>
<h2 id="查询构造器"><a href="#查询构造器" class="headerlink" title="查询构造器"></a>查询构造器</h2><p>如果说 MaBatisPlus 有什么最令人惊喜，毫无疑问是对查询构造器的封装。<br>使用查询构造器提供的各种函数，可以快速拼接出查询条件。<br>比如希望查询字段大于某值，可以使用 <code>gt</code> 函数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">QueryWrapper queryWrapper = new QueryWrapper();</div><div class="line">queryWrapper.gt(&quot;id&quot;, 2);</div><div class="line">List&lt;Person&gt; personList = personMapper.selectList(queryWrapper);</div><div class="line">System.out.println(personList.toString());</div></pre></td></tr></table></figure></p>
<p>类似的，还有许多诸如 <code>between</code>，<code>groupBy</code>，<code>orderBy</code> 等方法可以方便进行数据库查询操作。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>使用 MyBatisPlus 能够快速对数据库进行操作，其提供的封装方法对于 Laravel 用户而言是相当熟悉和亲切的。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://mp.baomidou.com/" target="_blank" rel="external">https://mp.baomidou.com/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ckmessi.github.io/2019/08/12/使用MyBatisPlus操作数据库/" data-id="ckaqi87vg00agsh8t7wnrzrny" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/MyBatisPlus/">MyBatisPlus</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Go语言开发环境配置" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-hexo/2019/08/10/Go语言开发环境配置/" class="article-date">
  <time datetime="2019-08-10T07:51:46.000Z" itemprop="datePublished">2019-08-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-hexo/categories/后台/">后台</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-hexo/2019/08/10/Go语言开发环境配置/">Go语言开发环境配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这篇笔记总结在 Mac/Linux/Windows 系统下安装GO语言开发环境的流程。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h4 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h4><p>Mac 系统通常使用 Home Brew 工具进行安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">brew update</div><div class="line">brew install go</div></pre></td></tr></table></figure></p>
<h4 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h4><p>Linux 系统通常使用 APT 进行安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-get update</div><div class="line">sudo apt-get install golang</div></pre></td></tr></table></figure></p>
<h4 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h4><p>在 <a href="golang.org/dl">官网</a> 下载 Windows 的安装程序 <code>go1.x.x.windows-amd64.msi</code> 文件。<br>双击安装即可。</p>
<h2 id="验证完成安装"><a href="#验证完成安装" class="headerlink" title="验证完成安装"></a>验证完成安装</h2><p>安装完成后，打开命令行程序，输入 <code>go version</code> 按回车。<br>如果显示以下信息就表示成功了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">go version go1.x.x windows/amd64</div></pre></td></tr></table></figure></p>
<h2 id="关于-GOPATH"><a href="#关于-GOPATH" class="headerlink" title="关于 $GOPATH"></a>关于 $GOPATH</h2><p><code>$GOPATH</code> 表示所有 GO 语言文件应该放置的位置。<br>应该显式地设置环境变量 <code>$GOPATH</code> 为 <code>$HOME/go</code>。<br>对于 Mac/Linux 系统，<code>$GOPATH</code> 位置通常在 <code>/home/username/go</code> ；对于 Windows 系统，<code>$GOPATH</code> 位置通常在 <code>C:\Users\chenkai\go</code> 。</p>
<p>在 <code>$GOPATH</code> 下应该有三个文件夹：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">.</div><div class="line">├── bin</div><div class="line">├── pkg</div><div class="line">└── src</div></pre></td></tr></table></figure></p>
<p><code>bin</code> 用于放置编译好的 Go 程序安装的位置。<br><code>pkg</code> 用于编译包对象，可以忽略这个目录。<br><code>src</code> 放置所有 Go 项目的源代码。<br>通常可以将 Go 项目按照如下路径存放，这样方便使用 <code>go get</code> 工具。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$GOPATH/src/github.com/username/project</div></pre></td></tr></table></figure></p>
<p>通常需要在 <code>$GOPATH</code> 下手动创建上述目录。</p>
<h4 id="Mac-Linux"><a href="#Mac-Linux" class="headerlink" title="Mac/Linux"></a>Mac/Linux</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir -p $HOME/go/&#123;bin,pkg,src&#125;</div></pre></td></tr></table></figure>
<h4 id="Windiws"><a href="#Windiws" class="headerlink" title="Windiws:"></a>Windiws:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cd %USERPROFILE%</div><div class="line">md go</div><div class="line">cd go</div><div class="line">md bin pkg src</div></pre></td></tr></table></figure>
<h2 id="设置-GOPATH-和-PATH-环境变量"><a href="#设置-GOPATH-和-PATH-环境变量" class="headerlink" title="设置 GOPATH 和 PATH 环境变量"></a>设置 <code>GOPATH</code> 和 <code>PATH</code> 环境变量</h2><h4 id="Mac-Linux-1"><a href="#Mac-Linux-1" class="headerlink" title="Mac/Linux"></a>Mac/Linux</h4><p>在 <code>.bash_profile</code> 或类似的文件（比如 <code>.zshrc</code> 文件）中添加：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">export GOPATH=&quot;$HOME/go&quot;</div></pre></td></tr></table></figure></p>
<p>同时将 Go 的可执行文件夹添加到 <code>$PATH</code> 环境变量中：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">export PATH=$PATH:$GOPATH/bin</div></pre></td></tr></table></figure></p>
<h4 id="Windows-1"><a href="#Windows-1" class="headerlink" title="Windows"></a>Windows</h4><p>在环境变量页面，在用户变量中添加 <code>GOPATH</code> 值为 <code>%USERPROFILE%\go</code>。<br>在 cmd 中输入 <code>echo %GOPATH%</code> ，如果输出 <code>C:\Users\&lt;name&gt;\go</code> ，说明环境变量配置完成。<br>将 GO 的可执行程序添加到 %PATH% 中，在环境变量 <code>PATH</code> 后添加上 <code>%GOPATH%\bin</code>。<br>在 cmd 中输入 <code>echo %PATH%</code> ，如果在输出中看到 <code>C:\Users\&lt;name&gt;\go\gin</code> ，说明 <code>PATH</code> 环境变量配置完成。</p>
<h2 id="系统检查"><a href="#系统检查" class="headerlink" title="系统检查"></a>系统检查</h2><p>创建一个文件 <code>main.go</code> ，输入以下内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">package main</div><div class="line"></div><div class="line">import (</div><div class="line"> &quot;log&quot;</div><div class="line"> &quot;os&quot;</div><div class="line"> &quot;path/filepath&quot;</div><div class="line"> &quot;strings&quot;</div><div class="line">)</div><div class="line"></div><div class="line">func main() &#123;</div><div class="line"> gopath := os.Getenv(&quot;GOPATH&quot;)</div><div class="line"> if gopath == &quot;&quot; &#123;</div><div class="line">  log.Fatal(&quot;Your GOPATH has not been set!&quot;)</div><div class="line"> &#125;</div><div class="line"></div><div class="line"> path := os.Getenv(&quot;PATH&quot;)</div><div class="line"> gobin := filepath.Join(gopath, &quot;bin&quot;)</div><div class="line"> if !strings.Contains(path, gobin) &#123;</div><div class="line">  log.Fatalf(&quot;Your PATH does not contain %s&quot;, gobin)</div><div class="line"> &#125;</div><div class="line"></div><div class="line"> log.Println(&quot;Success!&quot;)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>执行 <code>go run main.go</code> ，如果看到 <code>Sucess</code> 说明配置成功，否则根据提示进行修改。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://www.gopherguides.com/courses/preparing-your-environment-for-go-development/" target="_blank" rel="external">https://www.gopherguides.com/courses/preparing-your-environment-for-go-development/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ckmessi.github.io/2019/08/10/Go语言开发环境配置/" data-id="ckaqi87rk001ush8t71wktpn6" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Go/">Go</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-初识Flyway" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-hexo/2019/08/07/初识Flyway/" class="article-date">
  <time datetime="2019-08-07T08:45:27.000Z" itemprop="datePublished">2019-08-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-hexo/categories/后台/">后台</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-hexo/2019/08/07/初识Flyway/">初识Flyway</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>对于熟悉 Laravel 框架的朋友们，可能非常喜爱其数据库迁移工具。<br>对于已经上线的项目，进行数据库结构的改变需要非常小心，使用统一的迁移脚本能够最大程度避免不同人修改数据库却在部署时忘记执行的情况。<br>类比于 Laravel 的迁移工具，在 Java 中我们可以使用 <a href="https://flywaydb.org/" target="_blank" rel="external">Flayway</a> 进行数据库迁移。</p>
<h2 id="基本使用方式"><a href="#基本使用方式" class="headerlink" title="基本使用方式"></a>基本使用方式</h2><p>根据官方说明文档，我们可以通过以下方式使用 <code>flyway</code>：</p>
<ul>
<li>命令行</li>
<li>JavaAPI</li>
<li>Maven</li>
<li>Gradle</li>
</ul>
<p>这里选择相对通用的 Maven 方式。<br>我们需要在 Maven 项目的 <code>pom.xml</code> 文件中添加 <code>flyway</code> 插件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&lt;project xmlns=&quot;...&quot;&gt;</div><div class="line">    ...</div><div class="line">    &lt;build&gt;</div><div class="line">        &lt;plugins&gt;</div><div class="line">            &lt;plugin&gt;</div><div class="line">                &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;</div><div class="line">                &lt;artifactId&gt;flyway-maven-plugin&lt;/artifactId&gt;</div><div class="line">                &lt;version&gt;5.2.4&lt;/version&gt;</div><div class="line">                &lt;configuration&gt;</div><div class="line">                    &lt;url&gt;jdbc:h2:file:./target/foobar&lt;/url&gt;</div><div class="line">                    &lt;user&gt;sa&lt;/user&gt;</div><div class="line">                &lt;/configuration&gt;</div><div class="line">                &lt;dependencies&gt;</div><div class="line">                    &lt;dependency&gt;</div><div class="line">                        &lt;groupId&gt;com.h2database&lt;/groupId&gt;</div><div class="line">                        &lt;artifactId&gt;h2&lt;/artifactId&gt;</div><div class="line">                        &lt;version&gt;1.4.197&lt;/version&gt;</div><div class="line">                    &lt;/dependency&gt;</div><div class="line">                &lt;/dependencies&gt;</div><div class="line">            &lt;/plugin&gt;</div><div class="line">        &lt;/plugins&gt;</div><div class="line">    &lt;/build&gt;</div><div class="line">&lt;/project&gt;</div></pre></td></tr></table></figure></p>
<p>其中 <code>configuration</code> 标签中指定了相关的数据库信息，可以根据需要修改为本地 MySQL 连接：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;configuration&gt;</div><div class="line">    &lt;url&gt;jdbc:mysql://localhost:3306/databaseName&lt;/url&gt;</div><div class="line">    &lt;user&gt;username&lt;/user&gt;</div><div class="line">    &lt;password&gt;password&lt;/password&gt;</div><div class="line">&lt;/configuration&gt;</div></pre></td></tr></table></figure></p>
<p>然后在 <code>src/main/resources/db/migration</code> 目录下，创建一个新的迁移脚本 <code>V1_Create_person_table.sql</code>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">create table Person(</div><div class="line">    id int NOT NULL PRIMARY KEY AUTO_INCREMENT,</div><div class="line">    name varchar(256) not null,</div><div class="line">    address varchar(128)</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>这样一个基础的配置和迁移脚本就准备好了。</p>
<h2 id="一些基础命令"><a href="#一些基础命令" class="headerlink" title="一些基础命令"></a>一些基础命令</h2><p>第一步，使用命令 <code>mvn flyway:baseline</code> 会在数据库中创建一个基础的表 <code>flyway_schema_history</code> ，此后 Flyway 进行迁移的所有版本历史都会记录在这个表中。   </p>
<h4 id="Migrate"><a href="#Migrate" class="headerlink" title="Migrate"></a>Migrate</h4><p>然后可以使用 <code>mvn flyway:migrate</code> 命令，执行后会发现数据库中多了一张 <code>Person</code> 表。<br>命令 <code>mvn flyway:migrate</code> 本身是幂等的，多次执行的效果是一样的。但如果改动了此前执行过的脚本，再次执行 <code>mvn flyway:migrate</code> 时就会报错。因此所有对数据库的改动，都应该新添加一个脚本而不是修改之前的脚本。</p>
<h4 id="Clean"><a href="#Clean" class="headerlink" title="Clean"></a>Clean</h4><p>可以使用 <code>mvn flyway:clean</code> 清除数据库中的所有表信息，使用这个命令前要相当谨慎。</p>
<h4 id="Info"><a href="#Info" class="headerlink" title="Info"></a>Info</h4><p>可以使用 <code>mvn info</code> 查看相关信息，其实质效果就是将 <code>flyway_schema_history</code> 表中的内容打印出来。</p>
<h4 id="Validate"><a href="#Validate" class="headerlink" title="Validate"></a>Validate</h4><p>命令 <code>mvn flyway:validate</code> 是一个检查操作，它会在以下几种情况发生时失败：</p>
<ul>
<li>迁移脚本文件的名称、类型或校验和发生变动；</li>
<li>添加了一些版本的脚本文件，但还没有应用；</li>
<li>应用了某些版本的脚本文件，但发生的错误；</li>
</ul>
<p>比如我们添加一个新的 <code>V2__Create_user_table.sql</code> 文件，不执行迁移操作，执行 <code>mvn flyway:validate</code> 操作，就会发现它失败了。<br>简单地讲，使用 <code>mvn flyway:validate</code> 操作可以用于检查当前数据库状态是否与迁移脚本库保持一致。</p>
<h4 id="Repair"><a href="#Repair" class="headerlink" title="Repair"></a>Repair</h4><p>当迁移执行失败，且数据库不支持 <code>DDL事务</code> 时，迁移将在 <code>schema_hisotry_table</code> 中被标识为 <code>failed</code> 状态，标识了需要手动清除数据库相关内容。<br>使用 <code>mvn flyway:validate</code> 命令将移除所有失败的迁移，并重新计算检验和等信息。<br>但要注意的是，一些数据库中遗留的用户对象还需要被手动清除。</p>
<h4 id="Undo"><a href="#Undo" class="headerlink" title="Undo"></a>Undo</h4><p>使用这个命令能够撤销上一次迁移操作，然而只有付费的 <code>Flyway Pro</code> 才可以使用这个命令。</p>
<h2 id="不同的迁移类型"><a href="#不同的迁移类型" class="headerlink" title="不同的迁移类型"></a>不同的迁移类型</h2><p>在上述样例中，我们创建的迁移脚本名称是 <code>V1_Create_person_table.sql</code>，这实际上包含了一个信息，说明这个迁移是一个 <code>Versioned Migration（基于版本的迁移）</code>。<br>事实上 Flyway 还有其它类型的迁移：</p>
<ul>
<li>Undo Migrations（撤销迁移）</li>
<li>Repeatable Migrations（可重复迁移）</li>
</ul>
<h4 id="基于版本迁移"><a href="#基于版本迁移" class="headerlink" title="基于版本迁移"></a>基于版本迁移</h4><p>其中 <code>基于版本迁移</code> 具有一个 <code>版本号</code> ，且这个版本号是唯一的，这些迁移按照顺序只会被执行一次。<br>通常 <code>基于版本迁移</code> 会应用于 <code>创建/修改/删除</code> 数据库中的 <code>表/索引/外键/枚举</code> 等，也可能用于关联数据的更新，用户数据的纠正。大多数情况下，可以按照递增的正整数赋予迁移脚本版本号，但 Flyway 也是很灵活的，可以接受小数点分隔的版本号。<br>Flyway 会按照版本顺序执行这些迁移脚本，版本号则按照你正常期望的方式排序。</p>
<h4 id="撤销迁移"><a href="#撤销迁移" class="headerlink" title="撤销迁移"></a>撤销迁移</h4><p>而 <code>撤销迁移</code> 是正常版本迁移的反向操作，通常用于撤销相同版本迁移的操作效果。撤销迁移的使用是可选的。</p>
<h4 id="可重复迁移"><a href="#可重复迁移" class="headerlink" title="可重复迁移"></a>可重复迁移</h4><p>对于 <code>可重复迁移</code> 而言没有版本号的概念，只要它们的内容校检和发生了变化，就会被执行。<br>通常而言，这类脚本对于管理数据库中的一些定义对象会比较有用，这些内容就可以被一个基于版本控制的单个文件维护起来，具体的例子有创建视图、过程、方法、包等。<br>在一次迁移执行过程中，<code>可重复迁移</code> 脚本总是在最后执行，在所有等待执行的 <code>基于版本的迁移</code> 脚本完成之后。<br><code>可重复迁移</code> 脚本的执行顺序依据其描述内容排序得到。<br>要使用 <code>可重复迁移</code> 脚本，就必须确保相同的脚本能够被执行多次，比如使用 <code>CREATE OR REPLACE</code> 语句。</p>
<h4 id="迁移脚本命名格式"><a href="#迁移脚本命名格式" class="headerlink" title="迁移脚本命名格式"></a>迁移脚本命名格式</h4><p>对于基于 SQL 语句的迁移脚本，基本的命名格式是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[Prefix][Version+][Separator][Description][Suffix]</div></pre></td></tr></table></figure></p>
<p>比如以下脚本中，<code>Separator</code> 就是两个下划线 <code>__</code>，而描述信息为 <code>Add_new_table</code>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">V2__Add_new_table.sql</div></pre></td></tr></table></figure></p>
<p>此外，可以使用基于 Java 代码的迁移脚本，这里暂时不详细叙述。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>总的来讲，<code>Flyway</code> 实现了部分 Laravel 迁移工具的功能，能够通过 <code>指定配置</code>、<code>创建迁移脚本</code>、<code>执行迁移</code> 等步骤完成数据库表的创建。</p>
<h2 id="参考链接："><a href="#参考链接：" class="headerlink" title="参考链接："></a>参考链接：</h2><p><a href="https://flywaydb.org" target="_blank" rel="external">https://flywaydb.org</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ckmessi.github.io/2019/08/07/初识Flyway/" data-id="ckaqi87wf00c9sh8t9jbiy63u" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Flyway/">Flyway</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Java/">Java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-初识MyBatisGenerator" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-hexo/2019/08/06/初识MyBatisGenerator/" class="article-date">
  <time datetime="2019-08-06T11:22:08.000Z" itemprop="datePublished">2019-08-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-hexo/categories/后台/">后台</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-hexo/2019/08/06/初识MyBatisGenerator/">初识MyBatisGenerator</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在 Spring Boot 项目中开发时，通常使用 <code>MyBatis</code> 与数据库打交道，然而 <code>MyBatis</code> 使用的 <code>xml</code> 文件比较复杂，若每个文件都手动撰写可能有点累。<br>这时可以使用 <code>MyBatis Generator</code> 工具进行代码的自动创建。</p>
<p>首先，采用一种方式引入 <code>MyBatisGenerator</code>。<br>我们采用 <code>Maven Plugin</code> 的方式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;project ...&gt;</div><div class="line">     ...</div><div class="line">     &lt;build&gt;</div><div class="line">       ...</div><div class="line">       &lt;plugins&gt;</div><div class="line">        ...</div><div class="line">        &lt;plugin&gt;</div><div class="line">          &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;</div><div class="line">          &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;/artifactId&gt;</div><div class="line">          &lt;version&gt;1.3.7&lt;/version&gt;</div><div class="line">        &lt;/plugin&gt;</div><div class="line">        ...</div><div class="line">      &lt;/plugins&gt;</div><div class="line">      ...</div><div class="line">    &lt;/build&gt;</div><div class="line">    ...</div><div class="line">  &lt;/project&gt;</div></pre></td></tr></table></figure></p>
<p>添加后可以使用 IDEA 右侧的 <code>Maven</code> 工具栏执行 <code>Plugins-&gt;mybati-generator-&gt;mybatis-generator:generate</code> 命令，会根据配置文件自动生成相关的模型文件、Mapper 文件、XML 文件。<br>也可以使用 <code>mvn</code> 命令进行生成操作：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn mybatis-generator:generate</div></pre></td></tr></table></figure></p>
<p>在执行上述命令时，主要会用到的配置文件是 <code>generatorConfig.xml</code> ，其中包含了如何连接数据库、需要生成哪些内容等信息。<br>这个 <code>generatorConfig.xml</code> 文件通常会被放置在 <code>src/main/resources</code> 文件夹下。<br>参考 <a href="http://www.mybatis.org/generator/configreference/xmlconfig.html" target="_blank" rel="external">官方文档</a> 可以撰写基础的配置文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;!DOCTYPE generatorConfiguration</div><div class="line">  PUBLIC &quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</div><div class="line">  &quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;&gt;</div><div class="line"></div><div class="line">&lt;generatorConfiguration&gt;</div><div class="line">  &lt;classPathEntry location=&quot;/Program Files/IBM/SQLLIB/java/db2java.zip&quot; /&gt;</div><div class="line"></div><div class="line">  &lt;context id=&quot;DB2Tables&quot; targetRuntime=&quot;MyBatis3&quot;&gt;</div><div class="line">    &lt;jdbcConnection driverClass=&quot;COM.ibm.db2.jdbc.app.DB2Driver&quot;</div><div class="line">        connectionURL=&quot;jdbc:db2:TEST&quot;</div><div class="line">        userId=&quot;db2admin&quot;</div><div class="line">        password=&quot;db2admin&quot;&gt;</div><div class="line">    &lt;/jdbcConnection&gt;</div><div class="line"></div><div class="line">    &lt;javaTypeResolver &gt;</div><div class="line">      &lt;property name=&quot;forceBigDecimals&quot; value=&quot;false&quot; /&gt;</div><div class="line">    &lt;/javaTypeResolver&gt;</div><div class="line"></div><div class="line">    &lt;javaModelGenerator targetPackage=&quot;test.model&quot; targetProject=&quot;\MBGTestProject\src&quot;&gt;</div><div class="line">      &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;</div><div class="line">      &lt;property name=&quot;trimStrings&quot; value=&quot;true&quot; /&gt;</div><div class="line">    &lt;/javaModelGenerator&gt;</div><div class="line"></div><div class="line">    &lt;sqlMapGenerator targetPackage=&quot;test.xml&quot; targetProject=&quot;\MBGTestProject\src&quot;&gt;</div><div class="line">      &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;</div><div class="line">    &lt;/sqlMapGenerator&gt;</div><div class="line"></div><div class="line">    &lt;javaClientGenerator type=&quot;XMLMAPPER&quot; targetPackage=&quot;test.dao&quot; targetProject=&quot;\MBGTestProject\src&quot;&gt;</div><div class="line">      &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;</div><div class="line">    &lt;/javaClientGenerator&gt;</div><div class="line"></div><div class="line">    &lt;table schema=&quot;DB2ADMIN&quot; tableName=&quot;ALLTYPES&quot; domainObjectName=&quot;Customer&quot; &gt;</div><div class="line">      &lt;property name=&quot;useActualColumnNames&quot; value=&quot;true&quot;/&gt;</div><div class="line">      &lt;generatedKey column=&quot;ID&quot; sqlStatement=&quot;DB2&quot; identity=&quot;true&quot; /&gt;</div><div class="line">      &lt;columnOverride column=&quot;DATE_FIELD&quot; property=&quot;startDate&quot; /&gt;</div><div class="line">      &lt;ignoreColumn column=&quot;FRED&quot; /&gt;</div><div class="line">      &lt;columnOverride column=&quot;LONG_VARCHAR_FIELD&quot; jdbcType=&quot;VARCHAR&quot; /&gt;</div><div class="line">    &lt;/table&gt;</div><div class="line"></div><div class="line">  &lt;/context&gt;</div><div class="line">&lt;/generatorConfiguration&gt;</div></pre></td></tr></table></figure></p>
<p>其中 <code>classPathEntry</code> 标签，需要填写数据库连接的工具所在路径，比如使用 <code>mysql-connector</code> 进行数据库连接的话，可以写成：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;classPathEntry location=&quot;C:\Users\username\.m2\repository\mysql-connector-java\8.0.16\mysql-connector-java-8.0.16.jar&quot; /&gt;</div></pre></td></tr></table></figure></p>
<p>其中 <code>jdbcConnection</code> 标签，标识了连接数据库的相关信息。</p>
<ul>
<li><code>driverClass</code>：驱动类，如 <code>com.mysql.cj.jdbc.Driver</code></li>
<li><code>connectionURL</code>：连接串，如 <code>jdbc:mysql://localhost:3306/DatabaseName?serverTimezone=UTC</code>；</li>
<li><code>userId</code>：连接用户名；</li>
<li><code>password</code>：连接密码；</li>
</ul>
<p>其中 <code>javaModelGenerator</code> 标签，用于生成模型文件（.java），它的各种属性含义可以参考 <a href="http://www.mybatis.org/generator/configreference/javaModelGenerator.html" target="_blank" rel="external">官方文档</a>：</p>
<ul>
<li><code>targetPackage</code>：可填写当前的包名称，比如 <code>com.company.sample.project.model</code>；</li>
<li><code>targetProject</code>：填写要生成的目标文件夹，比如 <code>C:\Users\username\projects\project\src\main\java</code>；</li>
</ul>
<p>其中 <code>sqlMapGenerator</code> 标签，用于生成SQL文件（.xml），它的各种属性含义可参考 <a href="http://www.mybatis.org/generator/configreference/sqlMapGenerator.html" target="_blank" rel="external">官方文档</a>：</p>
<ul>
<li><code>targetPackage</code>：可填写当前的包名称，比如 <code>\</code>；</li>
<li><code>targetProject</code>：填写要生成的目标文件夹，比如 <code>C:\Users\username\projects\project\src\main\resources\mapper</code>；</li>
</ul>
<p>其中 <code>javaClientGenerator</code> 标签，用于生成Mapper文件（.java），它的各种属性含义可参考 <a href="http://www.mybatis.org/generator/configreference/javaClientGenerator.html" target="_blank" rel="external">官方文档</a>：</p>
<ul>
<li><code>targetPackage</code>：可填写当前的包名称，比如 <code>com.company.sample.project.mapper</code>；</li>
<li><code>targetProject</code>：填写要生成的目标文件夹，比如 <code>C:\Users\username\projects\project\src\main\java</code>；</li>
</ul>
<p>最后的 <code>table</code> 标签，用于指定扫描的表，其中的属性较多，关键有：</p>
<ul>
<li><code>tableName</code>：表名称</li>
<li><code>domainObjectName</code>：生成的模型对象名称</li>
</ul>
<p>其中 <code>jdbcConnection</code> 标签的 <code>connectionURL</code> 属性要加参数 <code>serverTimezone=UTC</code> 是由于如果不加，会抛出异常：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Caused by: java.sql.SQLException: The server time zone value &apos;xxxx&apos; is unrecognized or represents more than on time zone, ...</div></pre></td></tr></table></figure></p>
<p>完成上述配置后，使用 <code>mvn mybatis-generator:generate</code> 命令，即可在对应文件夹下看到自动生成的文件。   </p>
<p>不过说实在的，即使能够自动生成代码，还是感觉 <code>MyBatis</code> 不怎么好用。。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="http://www.mybatis.org/generator/" target="_blank" rel="external">http://www.mybatis.org/generator/</a><br><a href="https://www.cnblogs.com/deng-cc/p/9340748.html" target="_blank" rel="external">https://www.cnblogs.com/deng-cc/p/9340748.html</a><br><a href="https://my.oschina.net/GEF/blog/712383" target="_blank" rel="external">https://my.oschina.net/GEF/blog/712383</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ckmessi.github.io/2019/08/06/初识MyBatisGenerator/" data-id="ckaqi87wn00crsh8t8friz5z6" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/MyBatis/">MyBatis</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Java中使用Optional避免多条件判断" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-hexo/2019/08/02/Java中使用Optional避免多条件判断/" class="article-date">
  <time datetime="2019-08-02T09:25:11.000Z" itemprop="datePublished">2019-08-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-hexo/categories/后台/">后台</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-hexo/2019/08/02/Java中使用Optional避免多条件判断/">Java中使用Optional避免多条件判断</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在 Java 8 中引入了 <code>Optional</code> 类，可以用来处理程序员经常遇到的麻烦问题：空指针异常。</p>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>在 Java 8 之前，凡是涉及到访问对象的方法或者属性的操作，都可能导致空指针异常：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">String roomName = person.getOffice().getRoom().getName();</div></pre></td></tr></table></figure></p>
<p>如果要保证上面这个语句不抛出空指针异常，需要在访问对象的过程中添加显式的检查：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">String roomName = null;</div><div class="line">if (person != null) &#123; </div><div class="line">    House office = person.getOffice();</div><div class="line">    if (office != null) &#123;</div><div class="line">        Room room = office.getRoom();</div><div class="line">        if (room != null) &#123;</div><div class="line">            roomName = room.getName();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这类代码比较冗长而累赘，难以维护。</p>
<h2 id="Optional-类的使用"><a href="#Optional-类的使用" class="headerlink" title="Optional 类的使用"></a>Optional 类的使用</h2><p>Java 8 中的 <code>Optional</code> 类能够创建一个包含对象的容器，这个容器可能包含、也可能不包含一个非空的值。<br>在 <code>Optional</code> 类中，声明了一个静态类型的空变量 <code>EMPTY</code>，当容器中对象值为空时通常会使用它：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">private static final Optional&lt;?&gt; EMPTY = new Optional&lt;&gt;();</div></pre></td></tr></table></figure></p>
<p>此外每个 <code>Optional</code> 类对象都包含一个值 <code>value</code> ，如果非空表示当前容器对象值，否则表示值不存在。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * If non-null, the value; if null, indicates no value is present</div><div class="line"> */</div><div class="line">private final T value;</div></pre></td></tr></table></figure></p>
<h4 id="创建-Optional-对象"><a href="#创建-Optional-对象" class="headerlink" title="创建 Optional 对象"></a>创建 Optional 对象</h4><p>如果使用 <code>of</code> 方法，传入值为 <code>null</code> 时，会抛错：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Optional&lt;Person&gt; opt = Optional.of(null);</div></pre></td></tr></table></figure></p>
<p>如果使用 <code>ofNullable</code> 方法，传入值为 <code>null</code> 时，不会抛出错误，此时创建的类对象中包含的值是 <code>EMPTY</code> ：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Optional&lt;Person&gt; opt = Optional.ofNullable(null);</div></pre></td></tr></table></figure></p>
<h4 id="获取-Optional-对象"><a href="#获取-Optional-对象" class="headerlink" title="获取 Optional 对象"></a>获取 Optional 对象</h4><p>在类方法中，可以使用 <code>get</code> 方法获得实例内的对象，但这种方法在值为 <code>null</code> 时会抛出异常：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Person person = new Person();</div><div class="line">Optional&lt;Person&gt; opt = Optional.ofNullable(person);</div><div class="line">String name = opt.get().getName();</div></pre></td></tr></table></figure></p>
<p>如果想检查值是否为 <code>null</code> ，可以使用 <code>isPresent</code> 方法检查，在 <code>Optional</code> 类中的方法定义很直白：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">public boolean isPresent() &#123;</div><div class="line">    return value != null;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="返回默认值"><a href="#返回默认值" class="headerlink" title="返回默认值"></a>返回默认值</h4><p><code>Optional</code> 类提供了一些方法用于返回默认值，比如 <code>orElse</code> 方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">String name = Optional.ofNullable(null).orElse(&quot;default&quot;);</div></pre></td></tr></table></figure></p>
<h4 id="转换"><a href="#转换" class="headerlink" title="转换"></a>转换</h4><p><code>Optional</code> 类提供一些方法对值进行转换，比如 <code>map</code> 方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Person person = new Person();</div><div class="line">String name = Optional.ofNullable(person).map(Person::getName);</div></pre></td></tr></table></figure></p>
<p>还有一个 <code>flatMap</code> 方法与 <code>map</code> 方法类似，区别在于 <code>flatMap</code> 要求其映射函数的返回值必须是 <code>Optionsl</code> 类。<br>即 <code>map</code> 方法在调用结束后会自动将结果用 <code>Optional</code> 类进行封装，而 <code>flatMap</code> 不会。</p>
<h2 id="优化冗长的条件驱动语句"><a href="#优化冗长的条件驱动语句" class="headerlink" title="优化冗长的条件驱动语句"></a>优化冗长的条件驱动语句</h2><p>综合使用上述 <code>Optional</code> 类中的方法，可以去除代码中的条件驱动语句。<br>假设有一个类：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">package com.ckmessi.springcloudtest.dummy;</div><div class="line">import lombok.Data;</div><div class="line"></div><div class="line">@Data</div><div class="line">public class Person &#123;</div><div class="line">    /**</div><div class="line">     * 办公室</div><div class="line">     */</div><div class="line">    private House office;</div><div class="line">    /**</div><div class="line">     * 内部类：房屋</div><div class="line">     */</div><div class="line">    @Data</div><div class="line">    class House &#123;</div><div class="line">        /**</div><div class="line">         * 房间</div><div class="line">         */</div><div class="line">        private Room room;</div><div class="line">    &#125;</div><div class="line">    /**</div><div class="line">     * 内部类：房间</div><div class="line">     */</div><div class="line">    @Data</div><div class="line">    class Room &#123;</div><div class="line">        /**</div><div class="line">         * 房间名称</div><div class="line">         */</div><div class="line">        private String name;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>如果要获取当前 <code>Person</code> 对象的办公室房间名称，可能需要以下语句：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Person person = new Person();</div><div class="line">String roomName = person.getOffice().getRoom().getName();</div></pre></td></tr></table></figure></p>
<p>如果正常使用非空判断，使用的语句可能很冗长，而使用 <code>Optional</code> 类进行优化，则比较清晰：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">String roomName = Optional.ofNullable(person)</div><div class="line">    .map(Person::getOffice)</div><div class="line">    .map(Person.House::getRoom)</div><div class="line">    .map(Person.Room::getName)</div><div class="line">    .orElse(&quot;默认名称&quot;);</div><div class="line">System.out.println(roomName);</div></pre></td></tr></table></figure></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>使用 <code>Optional</code> 类可以最大限度减少代码执行过程中的空指针异常，同时使代码更加简洁优雅。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://www.jianshu.com/p/63830b7cb743" target="_blank" rel="external">https://www.jianshu.com/p/63830b7cb743</a><br><a href="https://www.jianshu.com/p/233f7c610dd4" target="_blank" rel="external">https://www.jianshu.com/p/233f7c610dd4</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ckmessi.github.io/2019/08/02/Java中使用Optional避免多条件判断/" data-id="ckaqi87s9002vsh8tzysv4bco" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Java/">Java</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/blog-hexo/page/3/">&laquo; zurück</a><a class="page-number" href="/blog-hexo/">1</a><a class="page-number" href="/blog-hexo/page/2/">2</a><a class="page-number" href="/blog-hexo/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/blog-hexo/page/5/">5</a><a class="page-number" href="/blog-hexo/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/blog-hexo/page/16/">16</a><a class="extend next" rel="next" href="/blog-hexo/page/5/">weiter &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Kategorien</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/blog-hexo/categories/Android/">Android</a></li><li class="category-list-item"><a class="category-list-link" href="/blog-hexo/categories/人脸识别/">人脸识别</a></li><li class="category-list-item"><a class="category-list-link" href="/blog-hexo/categories/前端/">前端</a></li><li class="category-list-item"><a class="category-list-link" href="/blog-hexo/categories/后台/">后台</a></li><li class="category-list-item"><a class="category-list-link" href="/blog-hexo/categories/工具/">工具</a></li><li class="category-list-item"><a class="category-list-link" href="/blog-hexo/categories/深度学习/">深度学习</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/AIDL/">AIDL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Ajax/">Ajax</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Alembic/">Alembic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Angular/">Angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Anime-js/">Anime.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Apache/">Apache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Azure/">Azure</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/C/">C#</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/C/">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/CORS/">CORS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/CSharp/">CSharp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Command-Line/">Command Line</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Composer/">Composer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Crontab/">Crontab</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Deep-Learning/">Deep Learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Docker/">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/ElementUI/">ElementUI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Excel/">Excel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/FFMpeg/">FFMpeg</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/FastAPI/">FastAPI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Faster-RCNN/">Faster RCNN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Flyway/">Flyway</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Frontend/">Frontend</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Gem/">Gem</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Github/">Github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Go/">Go</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Grunt/">Grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/HTML/">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Hexo/">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Javascript/">Javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/JdbcTemplate/">JdbcTemplate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Laravel/">Laravel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Laravel扩展/">Laravel扩展</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/License/">License</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Mac/">Mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/MacOS/">MacOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Maven/">Maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Mkdocs/">Mkdocs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/MyBatis/">MyBatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/MyBatisPlus/">MyBatisPlus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/MySQL/">MySQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Mybatis/">Mybatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Mysql/">Mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Nginx/">Nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Node-js/">Node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/NodeJS/">NodeJS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Oh-My-Zsh/">Oh-My-Zsh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/OpenSSH/">OpenSSH</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Oracle/">Oracle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/PHP/">PHP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/PHPUnit/">PHPUnit</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Pip/">Pip</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Pipe/">Pipe</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/PowerShell/">PowerShell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Pythonenv/">Pythonenv</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/React/">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Ruby/">Ruby</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/RuleEngine/">RuleEngine</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Rust/">Rust</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/SQLAlchemy/">SQLAlchemy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/SSH/">SSH</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Shell/">Shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Spring/">Spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Spring-Boot/">Spring Boot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/SpringCloud/">SpringCloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Ubuntu/">Ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Visual-Studio/">Visual Studio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/VisualStudio/">VisualStudio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Vue/">Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Windows/">Windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/XML/">XML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/YAML/">YAML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Zip/">Zip</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/axios/">axios</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/base64/">base64</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/bumpversion/">bumpversion</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/cookiecutter/">cookiecutter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/fastjson/">fastjson</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/ffmpeg/">ffmpeg</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/grep/">grep</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/heatmap-js/">heatmap.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/hexdump/">hexdump</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/interact-js/">interact.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/libfacedetection/">libfacedetection</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/md5/">md5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/npm/">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/peewee/">peewee</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/pip/">pip</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/sed/">sed</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/setuptools/">setuptools</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/vim/">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/virtualenv/">virtualenv</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/xargs/">xargs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/zip/">zip</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/【Supervisor-Linux/">【Supervisor, Linux]</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/个人博客/">个人博客</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/前端/">前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/对象检测/">对象检测</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/概率论/">概率论</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/正则表达式/">正则表达式</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/blog-hexo/tags/AIDL/" style="font-size: 10px;">AIDL</a> <a href="/blog-hexo/tags/Ajax/" style="font-size: 10px;">Ajax</a> <a href="/blog-hexo/tags/Alembic/" style="font-size: 10px;">Alembic</a> <a href="/blog-hexo/tags/Android/" style="font-size: 10px;">Android</a> <a href="/blog-hexo/tags/Angular/" style="font-size: 11.67px;">Angular</a> <a href="/blog-hexo/tags/Anime-js/" style="font-size: 10px;">Anime.js</a> <a href="/blog-hexo/tags/Apache/" style="font-size: 10px;">Apache</a> <a href="/blog-hexo/tags/Azure/" style="font-size: 10px;">Azure</a> <a href="/blog-hexo/tags/C/" style="font-size: 11.67px;">C#</a> <a href="/blog-hexo/tags/C/" style="font-size: 10px;">C++</a> <a href="/blog-hexo/tags/CORS/" style="font-size: 10px;">CORS</a> <a href="/blog-hexo/tags/CSharp/" style="font-size: 10.83px;">CSharp</a> <a href="/blog-hexo/tags/Command-Line/" style="font-size: 10.83px;">Command Line</a> <a href="/blog-hexo/tags/Composer/" style="font-size: 10px;">Composer</a> <a href="/blog-hexo/tags/Crontab/" style="font-size: 10px;">Crontab</a> <a href="/blog-hexo/tags/Deep-Learning/" style="font-size: 10px;">Deep Learning</a> <a href="/blog-hexo/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/blog-hexo/tags/ElementUI/" style="font-size: 11.67px;">ElementUI</a> <a href="/blog-hexo/tags/Excel/" style="font-size: 10px;">Excel</a> <a href="/blog-hexo/tags/FFMpeg/" style="font-size: 10px;">FFMpeg</a> <a href="/blog-hexo/tags/FastAPI/" style="font-size: 10px;">FastAPI</a> <a href="/blog-hexo/tags/Faster-RCNN/" style="font-size: 10px;">Faster RCNN</a> <a href="/blog-hexo/tags/Flyway/" style="font-size: 10px;">Flyway</a> <a href="/blog-hexo/tags/Frontend/" style="font-size: 10px;">Frontend</a> <a href="/blog-hexo/tags/Gem/" style="font-size: 10px;">Gem</a> <a href="/blog-hexo/tags/Git/" style="font-size: 15px;">Git</a> <a href="/blog-hexo/tags/Github/" style="font-size: 10px;">Github</a> <a href="/blog-hexo/tags/Go/" style="font-size: 10.83px;">Go</a> <a href="/blog-hexo/tags/Grunt/" style="font-size: 10px;">Grunt</a> <a href="/blog-hexo/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/blog-hexo/tags/Hexo/" style="font-size: 12.5px;">Hexo</a> <a href="/blog-hexo/tags/JSON/" style="font-size: 10px;">JSON</a> <a href="/blog-hexo/tags/Java/" style="font-size: 17.5px;">Java</a> <a href="/blog-hexo/tags/JavaScript/" style="font-size: 12.5px;">JavaScript</a> <a href="/blog-hexo/tags/Javascript/" style="font-size: 18.33px;">Javascript</a> <a href="/blog-hexo/tags/JdbcTemplate/" style="font-size: 10px;">JdbcTemplate</a> <a href="/blog-hexo/tags/Laravel/" style="font-size: 19.17px;">Laravel</a> <a href="/blog-hexo/tags/Laravel扩展/" style="font-size: 10px;">Laravel扩展</a> <a href="/blog-hexo/tags/License/" style="font-size: 10px;">License</a> <a href="/blog-hexo/tags/Linux/" style="font-size: 15.83px;">Linux</a> <a href="/blog-hexo/tags/Mac/" style="font-size: 10px;">Mac</a> <a href="/blog-hexo/tags/MacOS/" style="font-size: 10px;">MacOS</a> <a href="/blog-hexo/tags/Maven/" style="font-size: 10px;">Maven</a> <a href="/blog-hexo/tags/Mkdocs/" style="font-size: 10px;">Mkdocs</a> <a href="/blog-hexo/tags/MyBatis/" style="font-size: 10px;">MyBatis</a> <a href="/blog-hexo/tags/MyBatisPlus/" style="font-size: 10px;">MyBatisPlus</a> <a href="/blog-hexo/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/blog-hexo/tags/Mybatis/" style="font-size: 10.83px;">Mybatis</a> <a href="/blog-hexo/tags/Mysql/" style="font-size: 10.83px;">Mysql</a> <a href="/blog-hexo/tags/Nginx/" style="font-size: 11.67px;">Nginx</a> <a href="/blog-hexo/tags/Node-js/" style="font-size: 10px;">Node.js</a> <a href="/blog-hexo/tags/NodeJS/" style="font-size: 10px;">NodeJS</a> <a href="/blog-hexo/tags/Oh-My-Zsh/" style="font-size: 10px;">Oh-My-Zsh</a> <a href="/blog-hexo/tags/OpenSSH/" style="font-size: 10px;">OpenSSH</a> <a href="/blog-hexo/tags/Oracle/" style="font-size: 11.67px;">Oracle</a> <a href="/blog-hexo/tags/PHP/" style="font-size: 20px;">PHP</a> <a href="/blog-hexo/tags/PHPUnit/" style="font-size: 10px;">PHPUnit</a> <a href="/blog-hexo/tags/Pip/" style="font-size: 10px;">Pip</a> <a href="/blog-hexo/tags/Pipe/" style="font-size: 10px;">Pipe</a> <a href="/blog-hexo/tags/PowerShell/" style="font-size: 10.83px;">PowerShell</a> <a href="/blog-hexo/tags/Python/" style="font-size: 16.67px;">Python</a> <a href="/blog-hexo/tags/Pythonenv/" style="font-size: 10px;">Pythonenv</a> <a href="/blog-hexo/tags/React/" style="font-size: 10px;">React</a> <a href="/blog-hexo/tags/Ruby/" style="font-size: 10px;">Ruby</a> <a href="/blog-hexo/tags/RuleEngine/" style="font-size: 10px;">RuleEngine</a> <a href="/blog-hexo/tags/Rust/" style="font-size: 10px;">Rust</a> <a href="/blog-hexo/tags/SQLAlchemy/" style="font-size: 10px;">SQLAlchemy</a> <a href="/blog-hexo/tags/SSH/" style="font-size: 11.67px;">SSH</a> <a href="/blog-hexo/tags/Shell/" style="font-size: 10.83px;">Shell</a> <a href="/blog-hexo/tags/Spring/" style="font-size: 13.33px;">Spring</a> <a href="/blog-hexo/tags/Spring-Boot/" style="font-size: 10px;">Spring Boot</a> <a href="/blog-hexo/tags/SpringCloud/" style="font-size: 10px;">SpringCloud</a> <a href="/blog-hexo/tags/Ubuntu/" style="font-size: 11.67px;">Ubuntu</a> <a href="/blog-hexo/tags/Visual-Studio/" style="font-size: 10px;">Visual Studio</a> <a href="/blog-hexo/tags/VisualStudio/" style="font-size: 10px;">VisualStudio</a> <a href="/blog-hexo/tags/Vue/" style="font-size: 14.17px;">Vue</a> <a href="/blog-hexo/tags/Windows/" style="font-size: 11.67px;">Windows</a> <a href="/blog-hexo/tags/XML/" style="font-size: 10px;">XML</a> <a href="/blog-hexo/tags/YAML/" style="font-size: 10px;">YAML</a> <a href="/blog-hexo/tags/Zip/" style="font-size: 10px;">Zip</a> <a href="/blog-hexo/tags/axios/" style="font-size: 10px;">axios</a> <a href="/blog-hexo/tags/base64/" style="font-size: 10px;">base64</a> <a href="/blog-hexo/tags/bumpversion/" style="font-size: 10px;">bumpversion</a> <a href="/blog-hexo/tags/cookiecutter/" style="font-size: 10px;">cookiecutter</a> <a href="/blog-hexo/tags/fastjson/" style="font-size: 10px;">fastjson</a> <a href="/blog-hexo/tags/ffmpeg/" style="font-size: 10px;">ffmpeg</a> <a href="/blog-hexo/tags/grep/" style="font-size: 10px;">grep</a> <a href="/blog-hexo/tags/heatmap-js/" style="font-size: 10px;">heatmap.js</a> <a href="/blog-hexo/tags/hexdump/" style="font-size: 10px;">hexdump</a> <a href="/blog-hexo/tags/interact-js/" style="font-size: 10px;">interact.js</a> <a href="/blog-hexo/tags/libfacedetection/" style="font-size: 10px;">libfacedetection</a> <a href="/blog-hexo/tags/md5/" style="font-size: 10px;">md5</a> <a href="/blog-hexo/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/blog-hexo/tags/npm/" style="font-size: 10px;">npm</a> <a href="/blog-hexo/tags/peewee/" style="font-size: 10px;">peewee</a> <a href="/blog-hexo/tags/pip/" style="font-size: 10px;">pip</a> <a href="/blog-hexo/tags/sed/" style="font-size: 10px;">sed</a> <a href="/blog-hexo/tags/setuptools/" style="font-size: 10px;">setuptools</a> <a href="/blog-hexo/tags/vim/" style="font-size: 10px;">vim</a> <a href="/blog-hexo/tags/virtualenv/" style="font-size: 10px;">virtualenv</a> <a href="/blog-hexo/tags/xargs/" style="font-size: 10px;">xargs</a> <a href="/blog-hexo/tags/zip/" style="font-size: 10px;">zip</a> <a href="/blog-hexo/tags/【Supervisor-Linux/" style="font-size: 10px;">【Supervisor, Linux]</a> <a href="/blog-hexo/tags/个人博客/" style="font-size: 11.67px;">个人博客</a> <a href="/blog-hexo/tags/前端/" style="font-size: 10px;">前端</a> <a href="/blog-hexo/tags/对象检测/" style="font-size: 10px;">对象检测</a> <a href="/blog-hexo/tags/概率论/" style="font-size: 10px;">概率论</a> <a href="/blog-hexo/tags/正则表达式/" style="font-size: 10px;">正则表达式</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2017/05/">May 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog-hexo/2020/05/28/Laravel中添加路径参数限制规则/">Laravel中添加路径参数限制规则</a>
          </li>
        
          <li>
            <a href="/blog-hexo/2020/03/26/Shell中使用xargs批量操作文件/">Shell中使用xargs批量操作文件</a>
          </li>
        
          <li>
            <a href="/blog-hexo/2020/01/16/Python匹配数值的正则表达式/">Python匹配数值的正则表达式</a>
          </li>
        
          <li>
            <a href="/blog-hexo/2020/01/13/使用zip命令压缩文件夹时排除某些文件/">使用zip命令压缩文件夹时排除某些文件</a>
          </li>
        
          <li>
            <a href="/blog-hexo/2020/01/10/使用ffmpeg保存网络视频流/">使用ffmpeg保存网络视频流</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 ckmessi<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/blog-hexo/" class="mobile-nav-link">Home</a>
  
    <a href="/blog-hexo/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/blog-hexo/fancybox/jquery.fancybox.css">
  <script src="/blog-hexo/fancybox/jquery.fancybox.pack.js"></script>


<script src="/blog-hexo/js/script.js"></script>



  </div>
</body>
</html>