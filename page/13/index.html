<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>不止是一位程序员</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Lionel的技术笔记总结">
<meta property="og:type" content="website">
<meta property="og:title" content="不止是一位程序员">
<meta property="og:url" content="http://ckmessi.github.io/page/13/index.html">
<meta property="og:site_name" content="不止是一位程序员">
<meta property="og:description" content="Lionel的技术笔记总结">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="不止是一位程序员">
<meta name="twitter:description" content="Lionel的技术笔记总结">
  
    <link rel="alternate" href="/blog-hexo/atom.xml" title="不止是一位程序员" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/blog-hexo/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog-hexo/" id="logo">不止是一位程序员</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/blog-hexo/" id="subtitle">Lionel的技术空间</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog-hexo/">Home</a>
        
          <a class="main-nav-link" href="/blog-hexo/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog-hexo/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://ckmessi.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Linux管道和awk实现字符连接" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-hexo/2018/01/04/Linux管道和awk实现字符连接/" class="article-date">
  <time datetime="2018-01-04T11:30:09.000Z" itemprop="datePublished">2018-01-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-hexo/categories/工具/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-hexo/2018/01/04/Linux管道和awk实现字符连接/">Linux管道和awk实现字符连接</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>在工作中遇到一个需求，快速将某个目录下的所有文件的完整路径输出，每行一个文件路径。<br>遇到这个需求时，非常直观的两个想法是：</p>
<ol>
<li><code>ls</code>命令：在Linux操作系统中，用<code>ls</code>能够列举目录下所有文件的列表</li>
<li><code>&gt;</code>重定向符号：使用重定向符号能够将输出结果重定向到目标文件中</li>
</ol>
<p>然而存在一个问题，<code>ls</code>命令只列出了文件名称，相比于完整目录还缺少目录的路径。</p>
<h2 id="awk简介"><a href="#awk简介" class="headerlink" title="awk简介"></a><code>awk</code>简介</h2><p><code>awk</code>是Linux一个强大的文本分析工具，使用方法为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">awk &apos;&#123;pattern + action&#125;&apos; &#123;filenames&#125;</div></pre></td></tr></table></figure></p>
<p>其中<code>pattern</code>表示AWK在数据中查找的内容，而<code>action</code>是找到匹配内容是所执行的命令。花括号<code>{}</code>不需要始终出现，但可以用于根据特定的模式对一系列指令进行分组。<br><code>awk</code>的工作流程是，读入有’\n’换行符分割的记录，然后将记录按指定的域分隔符划分域，填充域。<code>$0</code>表示所有域，<code>$1</code>表示第一个域，<code>$n</code>表示第n个域。默认域分隔符是<code>空白键</code>或<code>tab键</code>。<br>比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">awk &apos;&#123;print &quot;1234&quot;$1&quot;6&quot;$2&#125;&apos;</div></pre></td></tr></table></figure></p>
<p>然后输入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">5 7</div></pre></td></tr></table></figure></p>
<p>输出结果为<code>1234567</code>。<br>也可以使用：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">echo &quot;5 7&quot; | awk &apos;&#123;print &quot;1234&quot;$1&quot;6&quot;$2&#125;&apos;</div></pre></td></tr></table></figure></p>
<p>同样输出<code>1234567</code>。</p>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>根据管道和<code>awk</code>工具的特点，我们可以针对问题提出如下解决方案：<br>假设目标目录为<code>path/to/dir</code>，要生成一个文件<code>list.txt</code>，文件中每一行是目录下文件的完整目录名：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ls path/to/dir | awk &apos;&#123;print &quot;path/to/dir&quot;$1&#125;&apos; &gt; list.txt</div></pre></td></tr></table></figure></p>
<p>即可完成。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ckmessi.github.io/2018/01/04/Linux管道和awk实现字符连接/" data-id="ckbss7f34005th68tea3oh3j0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Pipe/">Pipe</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Mac使用命令行快速生成zip包" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-hexo/2018/01/02/Mac使用命令行快速生成zip包/" class="article-date">
  <time datetime="2018-01-02T05:49:52.000Z" itemprop="datePublished">2018-01-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-hexo/categories/工具/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-hexo/2018/01/02/Mac使用命令行快速生成zip包/">Mac使用命令行快速生成zip包</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Mac OS自带<code>zip</code>命令，可以用于生成<code>.zip</code>格式压缩文件。   </p>
<h4 id="压缩单个文件"><a href="#压缩单个文件" class="headerlink" title="压缩单个文件"></a>压缩单个文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">zip -e [file_name.zip] [file_name]</div></pre></td></tr></table></figure>
<p>其中<code>-e</code>选项表示加密压缩，需要在上述命令后输入密码和确认密码。</p>
<h4 id="压缩文件夹"><a href="#压缩文件夹" class="headerlink" title="压缩文件夹"></a>压缩文件夹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">zip -e -r [file_name.zip] [file_dir]</div></pre></td></tr></table></figure>
<p>其中<code>-r</code>选项表示递归地进行压缩，与Linux命令中<code>rm -r</code>的使用方式类似。</p>
<p>关于输入密码也可以通过一行命令直接完成。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">zip -r -p [password] [file_name.zip] [file_dir]</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ckmessi.github.io/2018/01/02/Mac使用命令行快速生成zip包/" data-id="ckbss7f30005ih68tchcyusv4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Mac/">Mac</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Zip/">Zip</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Mysql导出数据库表结构到Excel" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-hexo/2017/11/21/Mysql导出数据库表结构到Excel/" class="article-date">
  <time datetime="2017-11-21T14:07:09.000Z" itemprop="datePublished">2017-11-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-hexo/categories/后台/">后台</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-hexo/2017/11/21/Mysql导出数据库表结构到Excel/">Mysql导出数据库表结构到Excel</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在工作中遇到这样一个问题，希望能够将Mysql数据库的表结构导出，方便进行分析。<br>通常情况下，可以使用<code>mysqldump</code>命令，添加只导出数据库结构的选项，得到sql文件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysqldump --opt --host [db_host] -d [db_name] -u [user_name] -p &gt; output.sql</div></pre></td></tr></table></figure></p>
<p>然而得到的结果文件是sql语法的，尽管能够用于再次导入，但可读性较差。  </p>
<img src="/blog-hexo/2017/11/21/Mysql导出数据库表结构到Excel/1.png" alt="输出的sql文件内容" title="输出的sql文件内容">
<p>后来发现一种方式，能够直接在可视化数据库连接应用（如<code>Navicat</code>, <code>Sequel Pro</code>）中获取数据库表结构。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">SELECT</div><div class="line">  TABLE_NAME 表名,</div><div class="line">  COLUMN_NAME 列名,</div><div class="line">  COLUMN_TYPE 数据类型,</div><div class="line">    DATA_TYPE 字段类型,</div><div class="line">  CHARACTER_MAXIMUM_LENGTH 长度,</div><div class="line">  IS_NULLABLE 是否为空,</div><div class="line">  COLUMN_DEFAULT 默认值,</div><div class="line">  COLUMN_COMMENT 备注 </div><div class="line">FROM</div><div class="line"> INFORMATION_SCHEMA.COLUMNS</div><div class="line">WHERE</div><div class="line">table_schema =&apos;[database_name]&apos;</div></pre></td></tr></table></figure></p>
<p>得到的结果直接全选复制，粘贴到Excel表格中即可。</p>
<img src="/blog-hexo/2017/11/21/Mysql导出数据库表结构到Excel/2.png" alt="SequelPro中的查询结果" title="SequelPro中的查询结果">
<p>参考链接：<br>    <a href="http://www.jb51.net/article/28855.htm" target="_blank" rel="external">http://www.jb51.net/article/28855.htm</a><br>    <a href="http://blog.csdn.net/yangshijin1988/article/details/70229473" target="_blank" rel="external">http://blog.csdn.net/yangshijin1988/article/details/70229473</a>     </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ckmessi.github.io/2017/11/21/Mysql导出数据库表结构到Excel/" data-id="ckbss7f3a0068h68tqw7udvu0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Mysql/">Mysql</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Git-Fast-forward的一些常识" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-hexo/2017/11/18/Git-Fast-forward的一些常识/" class="article-date">
  <time datetime="2017-11-18T03:22:17.000Z" itemprop="datePublished">2017-11-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-hexo/categories/工具/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-hexo/2017/11/18/Git-Fast-forward的一些常识/">Git Fast-forward的一些常识</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在Git分支合并时，通常可以选择是否采用<code>Fast-forward</code>形式，本文探索一下不同选择造成的差异，以及Git中关于Fast-forward相关知识。</p>
<h2 id="分支单向前进的情况"><a href="#分支单向前进的情况" class="headerlink" title="分支单向前进的情况"></a>分支单向前进的情况</h2><p>假定两个分支<code>master</code>和<code>develop</code>，其中<code>master</code>分支保持不变，而<code>develop</code>在<code>master</code>基础上添加了若干次修改。</p>
<img src="/blog-hexo/2017/11/18/Git-Fast-forward的一些常识/1.PNG" alt="Develop分支单向前进" title="Develop分支单向前进">
<h4 id="使用Fast-forward形式"><a href="#使用Fast-forward形式" class="headerlink" title="使用Fast-forward形式"></a>使用<code>Fast-forward</code>形式</h4><p>此时使用<code>Fast-forward</code>形式进行合并分支，执行<code>git merge develop</code>或<code>git merge develop --fast-forward</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">git merge develop</div><div class="line">Updating 7e991e4..4c07f51</div><div class="line">Fast-forward</div><div class="line"> develop.txt | Bin 0 -&gt; 50 bytes</div><div class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</div><div class="line"> create mode 100644 develop.txt</div></pre></td></tr></table></figure></p>
<p>由于此时分支单向前进，<code>develop</code>分支中的内容相比较于<code>master</code>分支上增量是“纯粹”的，因此Git会默认使用<code>Fast-forward</code>形式。<br>在使用<code>Fast-forward</code>形式时，会自动合并提交，最后在<code>git log</code>的操作记录中，不会出现这一次合并操作。从图中也可以看出，<code>Fast-forward</code>形式就是直接将HEAD指针指向了最新提交处。</p>
<img src="/blog-hexo/2017/11/18/Git-Fast-forward的一些常识/2.PNG" alt="使用Fast-forward方式合并分支" title="使用Fast-forward方式合并分支">
<h4 id="禁用Fast-forward形式"><a href="#禁用Fast-forward形式" class="headerlink" title="禁用Fast-forward形式"></a>禁用<code>Fast-forward</code>形式</h4><p>在上述情况下，依然可以选择禁用<code>Fast-forward</code>进行合并，此时将产生一个合并提交<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">git merge develop --no-ff</div><div class="line">Merge made by the &apos;recursive&apos; strategy.</div><div class="line"> develop.txt | Bin 0 -&gt; 50 bytes</div><div class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</div><div class="line"> create mode 100644 develop.txt</div></pre></td></tr></table></figure></p>
<p>在禁用<code>Fast-forward</code>形式时，这次合并会将本次合并新建为一个commit，能够在<code>git log</code>操作记录中体现此次合并操作历史。<br>这样能够保留原来分支记录的完整性。</p>
<img src="/blog-hexo/2017/11/18/Git-Fast-forward的一些常识/3.PNG" alt="禁用Fast-forward方式合并分支" title="禁用Fast-forward方式合并分支">
<h2 id="分支双向前进的情况"><a href="#分支双向前进的情况" class="headerlink" title="分支双向前进的情况"></a>分支双向前进的情况</h2><p>假定两个分支<code>master</code>和<code>develop</code>，其中<code>develop</code>以<code>master</code>为基础上添加了若干次修改，同时<code>master</code>分支也添加了若干次修改。</p>
<img src="/blog-hexo/2017/11/18/Git-Fast-forward的一些常识/4.PNG" alt="master分支与develop分支双向前进" title="master分支与develop分支双向前进">
<p>此时希望将<code>develop</code>分支合并到<code>master</code>分支上，是无法使用<code>Fast-forward</code>形式的。<br>在<code>master</code>分支执行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git merge develop --ff-only</div><div class="line">fatal: Not possible to fast-forward, aborting.</div></pre></td></tr></table></figure></p>
<p>此时只能执行<code>git merge develop</code>或<code>git merge develop --no-ff</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">git merge develop</div><div class="line">Merge made by the &apos;recursive&apos; strategy.</div><div class="line"> develop.txt | Bin 0 -&gt; 50 bytes</div><div class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</div><div class="line"> create mode 100644 develop.txt</div></pre></td></tr></table></figure></p>
<p>由于此时分支双向前进，<code>develop</code>分支和<code>master</code>分支上的变化有“交叉”，因此Git会默认禁用<code>Fast-forward</code>形式，Git会自动使用<code>recursive</code>的策略进行合并，如果有冲突则生成冲突文件，否则产生一个新的合并提交。</p>
<img src="/blog-hexo/2017/11/18/Git-Fast-forward的一些常识/5.PNG" alt="禁用Fast-forward方式合并分支" title="禁用Fast-forward方式合并分支">
<p>注意，有些版本的Git会自动完成这个合并提交，并为其添加注释为”Merge branch ‘develop’”；有些版本的Git会弹出一个Vim编辑框，提示用户输入相关注释，按<code>:wq</code>保存退出即可。</p>
<h2 id="Fast-forward和Git-Rebase"><a href="#Fast-forward和Git-Rebase" class="headerlink" title="Fast-forward和Git Rebase"></a>Fast-forward和Git Rebase</h2><p>还有一个比较容易混淆和困惑的点是<code>Fast-forward</code>和<code>Git Rebase</code>的区别。</p>
<p><code>Rebase</code>能够比<code>Fast-forward</code>完成更多事情。<code>Fast-forward</code>是很简单的一件事，而<code>Rebase</code>更复杂。有些时候在特殊的场景下，<code>Rebase</code>的效果恰好与<code>Fast-forward</code>相同，但并不意味着它与<code>Fast-forward</code>的合并是一样的。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ckmessi.github.io/2017/11/18/Git-Fast-forward的一些常识/" data-id="ckbss7f0h0019h68tcy3xfv04" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Git/">Git</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Laravel扩展Guzzle-发送HTTP请求" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-hexo/2017/11/17/Laravel扩展Guzzle-发送HTTP请求/" class="article-date">
  <time datetime="2017-11-17T14:05:41.000Z" itemprop="datePublished">2017-11-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-hexo/categories/后台/">后台</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-hexo/2017/11/17/Laravel扩展Guzzle-发送HTTP请求/">Laravel扩展Guzzle：发送HTTP请求</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在后台代码中，通常会遇到需要发送第三方HTTP请求的需求。在Laravel框架中，可以安装<a href="http://guzzle.readthedocs.io/en/latest/index.html" target="_blank" rel="external">Guzzle</a>进行便捷的HTTP请求。</p>
<p>在命令行中输入以下命令，使用<code>composer</code>进行安装。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">composer.phar require guzzlehttp/guzzle:~6.0</div></pre></td></tr></table></figure></p>
<p>在使用的代码处，使用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">use GuzzleHttp\Client;</div><div class="line">$response = $client-&gt;request(&apos;GET&apos;, &apos;http://example.com&apos;, [</div><div class="line">    &apos;query&apos; =&gt; [</div><div class="line">        &apos;param1&apos; =&gt; &apos;v1&apos;,</div><div class="line">        &apos;param2&apos; =&gt; &apos;v2&apos;,</div><div class="line">    ]</div><div class="line">]);</div><div class="line">$code = $response-&gt;getStatusCode();</div><div class="line">$reason = $response-&gt;getReasonPhrase();</div><div class="line">$content = $response-&gt;getBody()-&gt;getContents()</div></pre></td></tr></table></figure></p>
<p>相关配置选项可参考文档：<a href="http://guzzle.readthedocs.io/en/latest/request-options.html。" target="_blank" rel="external">http://guzzle.readthedocs.io/en/latest/request-options.html。</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ckmessi.github.io/2017/11/17/Laravel扩展Guzzle-发送HTTP请求/" data-id="ckbss7f2q004oh68t0lqxkroe" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Laravel/">Laravel</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/PHP/">PHP</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Laravel模拟创建Request" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-hexo/2017/11/14/Laravel模拟创建Request/" class="article-date">
  <time datetime="2017-11-14T14:00:53.000Z" itemprop="datePublished">2017-11-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-hexo/categories/后台/">后台</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-hexo/2017/11/14/Laravel模拟创建Request/">Laravel模拟创建Request</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在使用Laravel框架时，有的Unit Test可能希望模拟一个HTTP请求，方便地对特定组件的各个功能进行测试。比如，如果要测试一个中间件对于IP地址黑名单的屏蔽，对于白名单API的通过，对于白名单账号的判断等等。<br>此时，如何在代码中模拟创建一个自定义的Request，就是非常重要的步骤。</p>
<p>通过查询文档，知道可以使用<code>Request::create()</code>方法创建，具体使用方式如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$request = Request::create(&apos;/api/index&apos;, &apos;GET&apos;);</div></pre></td></tr></table></figure></p>
<p>当我们需要模拟IP地址等信息时，就需要更加清晰地了解<code>create()</code>静态方法的具体内容。<br><code>Request</code>类实质是继承自<code>vendor/symfony/http-foundation/Request.php</code>，打开这个文件，查找到<code>create()</code>函数所在的位置，可以看到这个函数的原型：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">public static function create($uri, $method = &apos;GET&apos;, $parameters = array(), $cookies = array(), $files = array(), $server = array(), $content = null)</div><div class="line">&#123;</div><div class="line">    $server = array_replace(array(</div><div class="line">        &apos;SERVER_NAME&apos; =&gt; &apos;localhost&apos;,</div><div class="line">        &apos;SERVER_PORT&apos; =&gt; 80,</div><div class="line">        &apos;HTTP_HOST&apos; =&gt; &apos;localhost&apos;,</div><div class="line">        &apos;HTTP_USER_AGENT&apos; =&gt; &apos;Symfony/3.X&apos;,</div><div class="line">        &apos;HTTP_ACCEPT&apos; =&gt; &apos;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&apos;,</div><div class="line">        &apos;HTTP_ACCEPT_LANGUAGE&apos; =&gt; &apos;en-us,en;q=0.5&apos;,</div><div class="line">        &apos;HTTP_ACCEPT_CHARSET&apos; =&gt; &apos;ISO-8859-1,utf-8;q=0.7,*;q=0.7&apos;,</div><div class="line">        &apos;REMOTE_ADDR&apos; =&gt; &apos;127.0.0.1&apos;,</div><div class="line">        &apos;SCRIPT_NAME&apos; =&gt; &apos;&apos;,</div><div class="line">        &apos;SCRIPT_FILENAME&apos; =&gt; &apos;&apos;,</div><div class="line">        &apos;SERVER_PROTOCOL&apos; =&gt; &apos;HTTP/1.1&apos;,</div><div class="line">        &apos;REQUEST_TIME&apos; =&gt; time(),</div><div class="line">    ), $server);</div><div class="line">    $server[&apos;PATH_INFO&apos;] = &apos;&apos;;</div><div class="line">    $server[&apos;REQUEST_METHOD&apos;] = strtoupper($method);</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>依据参数列表的格式，通过配置不同的参数可以模拟提交方式<code>GET</code>或<code>POST</code>，传递的参数<code>parameter</code>等。</p>
<p>注意到函数中首先使用了一个<code>array_replace</code>函数对参数<code>$server</code>进行操作，<code>array_replace</code>函数的含义是：如果第二个参数中的相关键值，则将其取代第一个参数中的对应键值。因此，如果要模拟一个IP地址的访问，我们可以构建一个包含<code>REMOTE_ADDR</code>的<code>$server</code>参数，传入<code>create</code>函数中即可。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> $server = array(</div><div class="line">    &apos;REMOTE_ADDR&apos; =&gt; &apos;127.0.0.123&apos;</div><div class="line">);</div><div class="line">$request = Request::create(&apos;/index&apos;, &apos;GET&apos;, array(), array(), array(), $server, null);</div></pre></td></tr></table></figure></p>
<p>模拟<code>POST</code>传递某些参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$request = Request::create(&apos;/index&apos;, &apos;POST&apos;, array(&apos;user_id&apos; =&gt; &apos;user1861&apos;));</div></pre></td></tr></table></figure></p>
<p>使用代码模拟创建Request的方法大抵如此。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ckmessi.github.io/2017/11/14/Laravel模拟创建Request/" data-id="ckbss7f2t004xh68tsb1yun6o" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Laravel/">Laravel</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/PHP/">PHP</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-PHPUnit测试protected方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-hexo/2017/11/09/PHPUnit测试protected方法/" class="article-date">
  <time datetime="2017-11-09T13:26:08.000Z" itemprop="datePublished">2017-11-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-hexo/categories/后台/">后台</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-hexo/2017/11/09/PHPUnit测试protected方法/">PHPUnit测试protected方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在使用PHPUnit进行单元测试时，可能需要对某个类的保护成员函数进行测试。<br>然而，权限为<code>protected</code>及<code>private</code>的成员函数是无法通过类对象直接访问的。<br>在这种情况下，有两种方法可以对保护及私有方法进行测试。</p>
<h2 id="使用继承类"><a href="#使用继承类" class="headerlink" title="使用继承类"></a>使用继承类</h2><p>创建一个继承自待测试类的子类，同时在类中定义一个<code>public</code>方法，在方法中调用对应<code>protected</code>方法并返回，这样间接调用了父类的<code>protected</code>方法。<br>首先，创建一个子类继承自待测试类，并创建一个<code>public</code>方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">class Children extends Base</div><div class="line">&#123;</div><div class="line">    public function publicBar($param) </div><div class="line">    &#123;</div><div class="line">        return $this-&gt;protectedBar($param);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后直接使用即可：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$children = new Children();</div><div class="line">$res = $childen-&gt;publicBar($param);</div></pre></td></tr></table></figure></p>
<h2 id="使用反射"><a href="#使用反射" class="headerlink" title="使用反射"></a>使用反射</h2><p>可以使用类的反射机制，根据方法名称取出对应方法，设置其访问级别，然后调用。<br>首先，创建一个<code>ReflectionClass</code>，使用<code>getMethod</code>方法获取方法，使用<code>setAccessible</code>方法设置访问权限。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">protected static function getMethod($name) &#123;</div><div class="line">  $class = new \ReflectionClass(&apos;MyClass&apos;);</div><div class="line">  $method = $class-&gt;getMethod($name);</div><div class="line">  $method-&gt;setAccessible(true);</div><div class="line">  return $method;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>使用<code>invokeArgs</code>方法触发方法的调用，第二个参数是对应方法的参数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">public function testFoo() &#123;</div><div class="line">  $foo = self::getMethod(&apos;foo&apos;);</div><div class="line">  $obj = new MyClass();</div><div class="line">  $foo-&gt;invokeArgs($obj, array(...));</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这里需要注意的是，Myclass会被直接或间接用到两次。第一次用于创建类的反射，第二次用于创建一个对象。</p>
<p>在测试类中可参考如下写法组织测试：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">$this-&gt;controller_reflection = new \ReflectionClass(&apos;App\Http\Controllers\Controller&apos;);</div><div class="line">$request = new Request();</div><div class="line">$this-&gt;controller = new Controller($request);</div><div class="line"></div><div class="line">protected function getMethod($name) &#123;</div><div class="line">    $method = $this-&gt;controller_reflection-&gt;getMethod($name);</div><div class="line">    $method-&gt;setAccessible(true);</div><div class="line">    return $method;</div><div class="line">&#125;</div><div class="line">protected function callOutputJSON($code, $msg, $data)&#123;</div><div class="line">    $method = $this-&gt;getMethod(&apos;outputJSON&apos;);</div><div class="line">    return $method-&gt;invokeArgs($this-&gt;controller, array($code, $msg, $data));</div><div class="line">&#125;</div><div class="line">public function testOutputJSON()</div><div class="line">&#123;</div><div class="line">    $code = 0;</div><div class="line">    $msg = &apos;msg&apos;;</div><div class="line">    $data = array(&apos;user&apos; =&gt; &apos;abcd&apos;);</div><div class="line">    $response = $this-&gt;callOutputJSON($code, $msg, $data);</div><div class="line">    $this-&gt;assertTrue(true);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>类似的，类的私有方法只能通过反射机制的方案进行测试。</p>
<p>参考链接：<br><a href="https://stackoverflow.com/questions/249664/best-practices-to-test-protected-methods-with-phpunit" target="_blank" rel="external">https://stackoverflow.com/questions/249664/best-practices-to-test-protected-methods-with-phpunit</a><br><a href="https://stackoverflow.com/questions/42094809/how-to-unit-test-protected-methods" target="_blank" rel="external">https://stackoverflow.com/questions/42094809/how-to-unit-test-protected-methods</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ckmessi.github.io/2017/11/09/PHPUnit测试protected方法/" data-id="ckbss7f3i006ph68tjvl2howh" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/PHP/">PHP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/PHPUnit/">PHPUnit</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-AngularJS中ng-if和ng-show的区别" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-hexo/2017/11/02/AngularJS中ng-if和ng-show的区别/" class="article-date">
  <time datetime="2017-11-02T13:19:02.000Z" itemprop="datePublished">2017-11-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-hexo/categories/前端/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-hexo/2017/11/02/AngularJS中ng-if和ng-show的区别/">AngularJS中ng-if和ng-show的区别</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在AngularJS框架中，遇到需要根据条件显示某元素时，通常可以有两种选择：使用<code>ng-if</code>或<code>ng-show</code>。这两者的区别也常见的关于是AngularJS的面试题。</p>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p><code>ng-if</code>是通过移除或重新创建DOM树的节点来控制显示。<br><code>ng-show</code>是通过添加预定义的<code>.gn-hide</code>css样式设置<code>display</code>样式为<code>none</code>来控制显示。</p>
<h2 id="一些注意事项"><a href="#一些注意事项" class="headerlink" title="一些注意事项"></a>一些注意事项</h2><h4 id="使用ng-if会创建一个子域（child-scope）"><a href="#使用ng-if会创建一个子域（child-scope）" class="headerlink" title="使用ng-if会创建一个子域（child scope）"></a>使用<code>ng-if</code>会创建一个子域（child scope）</h4><p>使用<code>ng-if</code>的元素，被移除时其scope将被销毁；被重新创建时新的scope将被创建。<br>使用<code>ng-if</code>的元素，如果使用<code>ng-model</code>域绑定父scope中的变量，当前子节点中变量的修改不会影响到父scope中的变量。</p>
<p>代码（1）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;input type=&quot;text&quot; ng-model=&quot;data&quot;&gt;</div><div class="line">&lt;div ng-if=&quot;true&quot;&gt;</div><div class="line">    &lt;input type=&quot;text&quot; ng-model=&quot;data&quot;&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>代码（2）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;input type=&quot;text&quot; ng-model=&quot;data&quot;&gt;</div><div class="line">&lt;div ng-show=&quot;true&quot;&gt;</div><div class="line">    &lt;input type=&quot;text&quot; ng-model=&quot;data&quot;&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>代码（3）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;input type=&quot;text&quot; ng-model=&quot;data&quot;&gt;</div><div class="line">&lt;div&gt;</div><div class="line">    &lt;input type=&quot;text&quot; ng-model=&quot;data&quot;&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>在上述三段代码中，</p>
<ul>
<li>修改第一个input中的值，会同步影响第二个input的值</li>
<li>代码（1）修改第二个input时，不会影响第一个input；而代码（2）（3）会</li>
<li>代码（1）修改第二个input后，再修改第一个input，不会同步影响第二个input</li>
</ul>
<p>原理是，在使用<code>ng-if</code>时，使用原型继承（prototypal inheritance）的方式根据父节点创建了新的scope。<br>如果希望子节点也同步影响父节点，可以有两种方式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;input type=&quot;text&quot; ng-model=&quot;data.input&quot;&gt;</div><div class="line">&lt;div ng-if=&quot;true&quot;&gt;</div><div class="line">    &lt;input type=&quot;text&quot; ng-model=&quot;data.input&quot;&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>或者<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;input type=&quot;text&quot; ng-model=&quot;data&quot;&gt;</div><div class="line">&lt;div ng-if=&quot;true&quot;&gt;</div><div class="line">    &lt;input type=&quot;text&quot; ng-model=&quot;$parent.data&quot;&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>此外，<code>ng-if</code>会从DOM中移除元素，这意味着所有绑定到元素上的handler都会丢失。<br>比如，假设给一个使用<code>ng-if</code>的元素绑定了click handler，当<code>ng-if</code>评估为<code>false</code>时，这个元素就从DOM中移除了，此前添加的click handler也永远不会再工作了，即使之后<code>ng-if</code>又被评估为<code>true</code>。需要重新添加相关handler。</p>
<h2 id="如何选择"><a href="#如何选择" class="headerlink" title="如何选择"></a>如何选择</h2><p>不在DOM中的元素对于效率的影响更少，因此web应用可能在使用<code>ng-if</code>时相比于使用<code>ng-show</code>看起来更快。然而这个差别是微不足道的。<br>因此决定如何选择的主要的因素在于，是否要把元素从DOM树中移除？</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://stackoverflow.com/questions/19177732/what-is-the-difference-between-ng-if-and-ng-show-ng-hide" target="_blank" rel="external">https://stackoverflow.com/questions/19177732/what-is-the-difference-between-ng-if-and-ng-show-ng-hide</a><br><a href="https://stackoverflow.com/questions/21869283/when-to-favor-ng-if-vs-ng-show-ng-hide" target="_blank" rel="external">https://stackoverflow.com/questions/21869283/when-to-favor-ng-if-vs-ng-show-ng-hide</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ckmessi.github.io/2017/11/02/AngularJS中ng-if和ng-show的区别/" data-id="ckbss7ezg0005h68ti1pkohve" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Angular/">Angular</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Javascript/">Javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Angular1模块间通信方式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-hexo/2017/10/30/Angular1模块间通信方式/" class="article-date">
  <time datetime="2017-10-30T13:34:14.000Z" itemprop="datePublished">2017-10-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-hexo/categories/前端/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-hexo/2017/10/30/Angular1模块间通信方式/">Angular1模块间通信方式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在Angular中通常需要进行模块间通讯，总结常用的几种通讯方式如下。</p>
<h2 id="通讯方式"><a href="#通讯方式" class="headerlink" title="通讯方式"></a>通讯方式</h2><ul>
<li>共享Service</li>
<li>基于事件：自定义$broadcast及$emit</li>
<li>在link函数中使用属性</li>
<li>单向数据流+$onChanges</li>
<li>使用第三方工具</li>
</ul>
<h4 id="共享Service"><a href="#共享Service" class="headerlink" title="共享Service"></a>共享Service</h4><p>定义一个公有的服务，多个组件都导入该service并访问。相当于创建了一个全局变量。</p>
<h4 id="基于事件：自定义-broadcast及-emit"><a href="#基于事件：自定义-broadcast及-emit" class="headerlink" title="基于事件：自定义$broadcast及$emit"></a>基于事件：自定义$broadcast及$emit</h4><p>Angular1提供了scope之间事件的传播机制。<br>使用<code>scope.$emit</code>可以往父级scope传播自定义事件并携带数据，<br>使用<code>scope.$broadcast</code>可以给所有子scope广播事件和数据，<br>使用<code>scope.$on(eventName,callback)</code>方法在所有需要接收到的scope中监听事件。<br>然而可能造成的问题是，每广播一次，整个scope下面的监听器都需要检测是否有对应的事件在监听并执行，如果scope层级较深，效率不高，代码也不容易追踪。</p>
<h4 id="在link函数中使用属性"><a href="#在link函数中使用属性" class="headerlink" title="在link函数中使用属性"></a>在link函数中使用属性</h4><p>每个directive在定义的时候都有一个<code>link</code>函数，函数签名的第三个参数是attrs，代表在该directive上面的所有属性数组。<br>attrs提供了一些方法，比较有用的是<code>$set</code>和<code>$observe</code>，前者可以自定义attr或修改已经有的attr的值，后者可以监听到该值的变化。<br>利用这种方式，我们可以让在位于同一个dom元素上的两个directive进行通讯，因为它们之间共享一个attrs数组。</p>
<h4 id="单向数据流-onChanges"><a href="#单向数据流-onChanges" class="headerlink" title="单向数据流+$onChanges"></a>单向数据流+$onChanges</h4><p>通过在component中声明bindings，可以进行数据的单向绑定，实现父组件与子组件之间的通信。</p>
<h4 id="使用第三方工具"><a href="#使用第三方工具" class="headerlink" title="使用第三方工具"></a>使用第三方工具</h4><p>如<code>Rxjs</code>等工具。</p>
<h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><p>个人感觉可以将通讯场景分为两种：</p>
<ul>
<li>父子模块间的通信</li>
<li>平行模块间的通信</li>
</ul>
<p>对于父子模块间的通信，通常可使用事件、属性传递、单向数据流等基础方式进行，缺点是当层次较多时，需要一层层传递，比较麻烦。<br>对于平行模块间的通信，最常用的可用共享Service，这相当于定义了一个全局变量，缺点在于增加了不同模块之间的耦合性。<br>此外还可以使用第三方组件（如<code>Rxjs</code>）进行监听和订阅，缺点在于不容易跟踪代码，此外需要注意取消订阅，否则可能会有内存泄露的问题。  </p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><blockquote>
<p><a href="http://www.cnblogs.com/myzhibie/p/5745018.html" target="_blank" rel="external">http://www.cnblogs.com/myzhibie/p/5745018.html</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ckmessi.github.io/2017/10/30/Angular1模块间通信方式/" data-id="ckbss7ez80001h68t8qz8adet" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Angular/">Angular</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Javascript/">Javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Laravel-Database-Query-Builder-insert的效率问题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-hexo/2017/10/23/Laravel-Database-Query-Builder-insert的效率问题/" class="article-date">
  <time datetime="2017-10-23T13:44:46.000Z" itemprop="datePublished">2017-10-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-hexo/categories/后台/">后台</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-hexo/2017/10/23/Laravel-Database-Query-Builder-insert的效率问题/">Laravel Database Query Builder insert的效率问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>最近在写代码的过程中发现一个奇怪的问题，在使用Laravel的Query Builder进行数据库数据插入时，似乎当数组长度较大时，插入过程会异常缓慢。</p>
<p>在Laravel项目中，使用<code>QueryBuilder</code>的<code>insert($values)</code>方法时，参数<code>$values</code>可以是一个表示为数据库表项的数据；也可以是一个数组，包含多个数据库表项。因此，在执行多次数据插入时，可以考虑将待插入数据拼接成一个数组，只调用一次<code>insert()</code>操作，避免频繁的数据库IO。然而物极必反，当<code>$values</code>数组长度过长时，程序执行的速度变得非常缓慢，这个奇妙的现象吸引了我的注意，开始逐步分析原因。</p>
<h2 id="原码概览"><a href="#原码概览" class="headerlink" title="原码概览"></a>原码概览</h2><p><code>Model::insert()</code>方法实质是调用了<code>Query Builder</code>中定义的方法，仔细逐步追踪<code>insert()</code>方法的操作步骤，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line">  * Insert a new record into the database.</div><div class="line">  *</div><div class="line">  * @param  array  $values</div><div class="line">  * @return bool</div><div class="line">  */</div><div class="line"> public function insert(array $values)</div><div class="line"> &#123;</div><div class="line">     // Since every insert gets treated like a batch insert, we will make sure the</div><div class="line">     // bindings are structured in a way that is convenient when building these</div><div class="line">     // inserts statements by verifying these elements are actually an array.</div><div class="line">     if (empty($values)) &#123;</div><div class="line">         return true;</div><div class="line">     &#125;</div><div class="line"></div><div class="line">     if (! is_array(reset($values))) &#123;</div><div class="line">         $values = [$values];</div><div class="line">     &#125;</div><div class="line"></div><div class="line">     // Here, we will sort the insert keys for every record so that each insert is</div><div class="line">     // in the same order for the record. We need to make sure this is the case</div><div class="line">     // so there are not any errors or problems when inserting these records.</div><div class="line">     else &#123;</div><div class="line">         foreach ($values as $key =&gt; $value) &#123;</div><div class="line">             ksort($value);</div><div class="line"></div><div class="line">             $values[$key] = $value;</div><div class="line">         &#125;</div><div class="line">     &#125;</div><div class="line"></div><div class="line">     // Finally, we will run this query against the database connection and return</div><div class="line">     // the results. We will need to also flatten these bindings before running</div><div class="line">     // the query so they are all in one huge, flattened array for execution.</div><div class="line">     return $this-&gt;connection-&gt;insert(</div><div class="line">         $this-&gt;grammar-&gt;compileInsert($this, $values),</div><div class="line">         $this-&gt;cleanBindings(Arr::flatten($values, 1))</div><div class="line">     );</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<h2 id="深入剖析"><a href="#深入剖析" class="headerlink" title="深入剖析"></a>深入剖析</h2><p>在这段代码中，实质有效操作语句只有3部分：</p>
<ul>
<li><p>1.对参数进行检查，如果为空直接返回；如果不是数组，将其封装为数组（这就是为什么参数即可以单项也可以多项的原理）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">if (empty($values)) &#123;</div><div class="line">    return true;</div><div class="line">&#125;</div><div class="line">if (! is_array(reset($values))) &#123;</div><div class="line">    $values = [$values];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>2.如果是既定数组，将数组中每一项按照其内部键值进行排序。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">foreach ($values as $key =&gt; $value) &#123;</div><div class="line">    ksort($value);</div><div class="line">    $values[$key] = $value;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>3.调用数据库链接，执行插入操作。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">return $this-&gt;connection-&gt;insert(</div><div class="line">    $this-&gt;grammar-&gt;compileInsert($this, $values),</div><div class="line">    $this-&gt;cleanBindings(Arr::flatten($values, 1))</div><div class="line">);</div></pre></td></tr></table></figure>
</li>
</ul>
<p>通过二分法Debug，发现造成时间开销巨大的步骤出现在语句<code>$this-&gt;cleanBindings(Arr::flatten($values, 1))</code>中。<br>再进一步，是出现在<code>Arr::flatten($values, 1)</code>中。<br>打开<code>src/Illuminate/Support/Arr.php</code>文件，找到对应函数如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">public static function flatten($array, $depth = INF)</div><div class="line">&#123;</div><div class="line">    return array_reduce($array, function ($result, $item) use ($depth) &#123;</div><div class="line">        $item = $item instanceof Collection ? $item-&gt;all() : $item;</div><div class="line">        if (! is_array($item)) &#123;</div><div class="line">            return array_merge($result, [$item]);</div><div class="line">        &#125; elseif ($depth === 1) &#123;</div><div class="line">            return array_merge($result, array_values($item));</div><div class="line">        &#125; else &#123;</div><div class="line">            return array_merge($result, static::flatten($item, $depth - 1));</div><div class="line">        &#125;</div><div class="line">    &#125;, []);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>重点来了，这个函数完成的功能主要是：</p>
<ul>
<li>1.使用<code>array_reduce</code>函数，对参数<code>$array</code>（也就是处理后的<code>$values</code>）数组使用回调函数，迭代地对数组每个元素进行处理。</li>
<li>2.针对每个元素，这里也就是<code>$item</code>，首先如果是一个<code>Collection</code>，使用<code>-&gt;all()</code>方法获取其值集合。</li>
<li>3.之后根据条件判断，由于我们传入的<code>$values</code>是一个数组，参数<code>$depth</code>为<code>1</code>，因此将进入第二个条件语句中。</li>
<li>4.执行<code>return array_merge($result, array_values($item));</code>语句。</li>
</ul>
<p>问题就出在这个<code>array_merge()</code>！</p>
<p>我们知道，在PHP中<code>array_merge()</code>将一个或多个数组的单元合并起来，一个数组中的值附加在前一个数组的后面，返回作为结果的数组。<br>函数<code>array_merge()</code>底层操作的效果是，如果输入的数组中有相同的字符串键名，则该键名后面的值将覆盖前一个值；如果数组包含数字键名，后面的值将不会覆盖原来的值，而是附加到后面。<br>对于我们目前的情况，传入的数组都是数字键名类型的，因此键值不会覆盖，会逐个添加到数组后面。</p>
<p>假设<code>$result</code>的长度为<code>n</code>，假设<code>array_values($item)</code>的长度固定为1，则每执行一次<code>array_merge()</code>的时间复杂度为<code>n</code><br>而<code>$result</code>的值是不断增长的，我们假设数组<code>$value</code>的长度为<code>n</code>，则<code>$result</code>的长度在遍历的过程中是从<code>1</code>增加到<code>n</code>。<br>总的时间复杂度是<code>O(n^2)</code>！</p>
<p>回到原始操作中，如果我们使用for循环逐个插入数据，时间复杂度仅为<code>O(n)</code>。</p>
<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>当使用<code>insert()</code>方法向数据库插入数据时，如果需要插入n条数据，有两种方式：</p>
<ul>
<li>方法1：将这n条数据拼成一个数组，将数据作为参数调用一次<code>insert()</code>方法</li>
<li>方法2：使用一个循环，调用n次<code>insert()</code>方法，即调用n次数据库插入请求，每次插入1条数据</li>
</ul>
<p>方法1在数据处理的时间复杂度是O(n^2)，网络请求的复杂度是O(1)；<br>方法2在数据处理的时间复杂度是O(n)，网络请求的复杂度是O(n)。</p>
<p>因此，根据插入数据数组的大小以及网络情况，在此可以进行一个权衡。<br>根据经验，当n=1000左右，可以容忍，当n&gt;10000时，数据处理的时间复杂度将远大于网络请求的时间开销。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ckmessi.github.io/2017/10/23/Laravel-Database-Query-Builder-insert的效率问题/" data-id="ckbss7f26003th68t21uhf2aw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/Laravel/">Laravel</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-hexo/tags/PHP/">PHP</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/blog-hexo/page/12/">&laquo; Prev</a><a class="page-number" href="/blog-hexo/">1</a><span class="space">&hellip;</span><a class="page-number" href="/blog-hexo/page/11/">11</a><a class="page-number" href="/blog-hexo/page/12/">12</a><span class="page-number current">13</span><a class="page-number" href="/blog-hexo/page/14/">14</a><a class="page-number" href="/blog-hexo/page/15/">15</a><span class="space">&hellip;</span><a class="page-number" href="/blog-hexo/page/17/">17</a><a class="extend next" rel="next" href="/blog-hexo/page/14/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/blog-hexo/categories/Android/">Android</a></li><li class="category-list-item"><a class="category-list-link" href="/blog-hexo/categories/人脸识别/">人脸识别</a></li><li class="category-list-item"><a class="category-list-link" href="/blog-hexo/categories/前端/">前端</a></li><li class="category-list-item"><a class="category-list-link" href="/blog-hexo/categories/后台/">后台</a></li><li class="category-list-item"><a class="category-list-link" href="/blog-hexo/categories/工具/">工具</a></li><li class="category-list-item"><a class="category-list-link" href="/blog-hexo/categories/深度学习/">深度学习</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/AIDL/">AIDL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Ajax/">Ajax</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Alembic/">Alembic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Angular/">Angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Anime-js/">Anime.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Apache/">Apache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Azure/">Azure</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/C/">C#</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/C/">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/CORS/">CORS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/CSharp/">CSharp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Code-Coverage/">Code Coverage</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Command-Line/">Command Line</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Composer/">Composer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Crontab/">Crontab</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Deep-Learning/">Deep Learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Docker/">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/ElementUI/">ElementUI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Excel/">Excel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/FFMpeg/">FFMpeg</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/FastAPI/">FastAPI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Faster-RCNN/">Faster RCNN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Flyway/">Flyway</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Frontend/">Frontend</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Gem/">Gem</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/GitLab/">GitLab</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Github/">Github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Go/">Go</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Grunt/">Grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/HTML/">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Hexo/">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Javascript/">Javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/JdbcTemplate/">JdbcTemplate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Laravel/">Laravel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Laravel扩展/">Laravel扩展</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/License/">License</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Mac/">Mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/MacOS/">MacOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Maven/">Maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Mkdocs/">Mkdocs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/MyBatis/">MyBatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/MyBatisPlus/">MyBatisPlus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/MySQL/">MySQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Mybatis/">Mybatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Mysql/">Mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Nginx/">Nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Node-js/">Node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/NodeJS/">NodeJS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Oh-My-Zsh/">Oh-My-Zsh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/OpenSSH/">OpenSSH</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Oracle/">Oracle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/PHP/">PHP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/PHPUnit/">PHPUnit</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Pip/">Pip</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Pipe/">Pipe</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/PowerShell/">PowerShell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Pythonenv/">Pythonenv</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/React/">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Ruby/">Ruby</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/RuleEngine/">RuleEngine</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Rust/">Rust</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/SQLAlchemy/">SQLAlchemy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/SSH/">SSH</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Shell/">Shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Spring/">Spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Spring-Boot/">Spring Boot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/SpringCloud/">SpringCloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Ubuntu/">Ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/VS-Code/">VS Code</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Visual-Studio/">Visual Studio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/VisualStudio/">VisualStudio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Vue/">Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Windows/">Windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/XML/">XML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/YAML/">YAML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/Zip/">Zip</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/axios/">axios</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/base64/">base64</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/bumpversion/">bumpversion</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/cookiecutter/">cookiecutter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/fastjson/">fastjson</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/ffmpeg/">ffmpeg</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/grep/">grep</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/heatmap-js/">heatmap.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/hexdump/">hexdump</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/interact-js/">interact.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/libfacedetection/">libfacedetection</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/md5/">md5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/npm/">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/peewee/">peewee</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/pip/">pip</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/sed/">sed</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/setuptools/">setuptools</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/vim/">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/virtualenv/">virtualenv</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/xargs/">xargs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/zip/">zip</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/【Supervisor-Linux/">【Supervisor, Linux]</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/个人博客/">个人博客</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/前端/">前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/对象检测/">对象检测</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/概率论/">概率论</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-hexo/tags/正则表达式/">正则表达式</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/blog-hexo/tags/AIDL/" style="font-size: 10px;">AIDL</a> <a href="/blog-hexo/tags/Ajax/" style="font-size: 10px;">Ajax</a> <a href="/blog-hexo/tags/Alembic/" style="font-size: 10px;">Alembic</a> <a href="/blog-hexo/tags/Android/" style="font-size: 10px;">Android</a> <a href="/blog-hexo/tags/Angular/" style="font-size: 11.82px;">Angular</a> <a href="/blog-hexo/tags/Anime-js/" style="font-size: 10px;">Anime.js</a> <a href="/blog-hexo/tags/Apache/" style="font-size: 10px;">Apache</a> <a href="/blog-hexo/tags/Azure/" style="font-size: 10px;">Azure</a> <a href="/blog-hexo/tags/C/" style="font-size: 11.82px;">C#</a> <a href="/blog-hexo/tags/C/" style="font-size: 10px;">C++</a> <a href="/blog-hexo/tags/CORS/" style="font-size: 10px;">CORS</a> <a href="/blog-hexo/tags/CSharp/" style="font-size: 10.91px;">CSharp</a> <a href="/blog-hexo/tags/Code-Coverage/" style="font-size: 10px;">Code Coverage</a> <a href="/blog-hexo/tags/Command-Line/" style="font-size: 10.91px;">Command Line</a> <a href="/blog-hexo/tags/Composer/" style="font-size: 10px;">Composer</a> <a href="/blog-hexo/tags/Crontab/" style="font-size: 10px;">Crontab</a> <a href="/blog-hexo/tags/Deep-Learning/" style="font-size: 10px;">Deep Learning</a> <a href="/blog-hexo/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/blog-hexo/tags/ElementUI/" style="font-size: 11.82px;">ElementUI</a> <a href="/blog-hexo/tags/Excel/" style="font-size: 10px;">Excel</a> <a href="/blog-hexo/tags/FFMpeg/" style="font-size: 10px;">FFMpeg</a> <a href="/blog-hexo/tags/FastAPI/" style="font-size: 10px;">FastAPI</a> <a href="/blog-hexo/tags/Faster-RCNN/" style="font-size: 10px;">Faster RCNN</a> <a href="/blog-hexo/tags/Flyway/" style="font-size: 10px;">Flyway</a> <a href="/blog-hexo/tags/Frontend/" style="font-size: 10px;">Frontend</a> <a href="/blog-hexo/tags/Gem/" style="font-size: 10px;">Gem</a> <a href="/blog-hexo/tags/Git/" style="font-size: 14.55px;">Git</a> <a href="/blog-hexo/tags/GitLab/" style="font-size: 10px;">GitLab</a> <a href="/blog-hexo/tags/Github/" style="font-size: 10px;">Github</a> <a href="/blog-hexo/tags/Go/" style="font-size: 10.91px;">Go</a> <a href="/blog-hexo/tags/Grunt/" style="font-size: 10px;">Grunt</a> <a href="/blog-hexo/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/blog-hexo/tags/Hexo/" style="font-size: 12.73px;">Hexo</a> <a href="/blog-hexo/tags/JSON/" style="font-size: 10px;">JSON</a> <a href="/blog-hexo/tags/Java/" style="font-size: 17.27px;">Java</a> <a href="/blog-hexo/tags/JavaScript/" style="font-size: 12.73px;">JavaScript</a> <a href="/blog-hexo/tags/Javascript/" style="font-size: 18.18px;">Javascript</a> <a href="/blog-hexo/tags/JdbcTemplate/" style="font-size: 10px;">JdbcTemplate</a> <a href="/blog-hexo/tags/Laravel/" style="font-size: 19.09px;">Laravel</a> <a href="/blog-hexo/tags/Laravel扩展/" style="font-size: 10px;">Laravel扩展</a> <a href="/blog-hexo/tags/License/" style="font-size: 10px;">License</a> <a href="/blog-hexo/tags/Linux/" style="font-size: 15.45px;">Linux</a> <a href="/blog-hexo/tags/Mac/" style="font-size: 10px;">Mac</a> <a href="/blog-hexo/tags/MacOS/" style="font-size: 10px;">MacOS</a> <a href="/blog-hexo/tags/Maven/" style="font-size: 10px;">Maven</a> <a href="/blog-hexo/tags/Mkdocs/" style="font-size: 10px;">Mkdocs</a> <a href="/blog-hexo/tags/MyBatis/" style="font-size: 10px;">MyBatis</a> <a href="/blog-hexo/tags/MyBatisPlus/" style="font-size: 10px;">MyBatisPlus</a> <a href="/blog-hexo/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/blog-hexo/tags/Mybatis/" style="font-size: 10.91px;">Mybatis</a> <a href="/blog-hexo/tags/Mysql/" style="font-size: 10.91px;">Mysql</a> <a href="/blog-hexo/tags/Nginx/" style="font-size: 11.82px;">Nginx</a> <a href="/blog-hexo/tags/Node-js/" style="font-size: 10px;">Node.js</a> <a href="/blog-hexo/tags/NodeJS/" style="font-size: 10px;">NodeJS</a> <a href="/blog-hexo/tags/Oh-My-Zsh/" style="font-size: 10px;">Oh-My-Zsh</a> <a href="/blog-hexo/tags/OpenSSH/" style="font-size: 10px;">OpenSSH</a> <a href="/blog-hexo/tags/Oracle/" style="font-size: 11.82px;">Oracle</a> <a href="/blog-hexo/tags/PHP/" style="font-size: 20px;">PHP</a> <a href="/blog-hexo/tags/PHPUnit/" style="font-size: 10px;">PHPUnit</a> <a href="/blog-hexo/tags/Pip/" style="font-size: 10px;">Pip</a> <a href="/blog-hexo/tags/Pipe/" style="font-size: 10px;">Pipe</a> <a href="/blog-hexo/tags/PowerShell/" style="font-size: 10.91px;">PowerShell</a> <a href="/blog-hexo/tags/Python/" style="font-size: 16.36px;">Python</a> <a href="/blog-hexo/tags/Pythonenv/" style="font-size: 10px;">Pythonenv</a> <a href="/blog-hexo/tags/React/" style="font-size: 10px;">React</a> <a href="/blog-hexo/tags/Ruby/" style="font-size: 10px;">Ruby</a> <a href="/blog-hexo/tags/RuleEngine/" style="font-size: 10px;">RuleEngine</a> <a href="/blog-hexo/tags/Rust/" style="font-size: 10px;">Rust</a> <a href="/blog-hexo/tags/SQLAlchemy/" style="font-size: 10px;">SQLAlchemy</a> <a href="/blog-hexo/tags/SSH/" style="font-size: 11.82px;">SSH</a> <a href="/blog-hexo/tags/Shell/" style="font-size: 10.91px;">Shell</a> <a href="/blog-hexo/tags/Spring/" style="font-size: 13.64px;">Spring</a> <a href="/blog-hexo/tags/Spring-Boot/" style="font-size: 10px;">Spring Boot</a> <a href="/blog-hexo/tags/SpringCloud/" style="font-size: 10px;">SpringCloud</a> <a href="/blog-hexo/tags/Ubuntu/" style="font-size: 11.82px;">Ubuntu</a> <a href="/blog-hexo/tags/VS-Code/" style="font-size: 10px;">VS Code</a> <a href="/blog-hexo/tags/Visual-Studio/" style="font-size: 10px;">Visual Studio</a> <a href="/blog-hexo/tags/VisualStudio/" style="font-size: 10px;">VisualStudio</a> <a href="/blog-hexo/tags/Vue/" style="font-size: 14.55px;">Vue</a> <a href="/blog-hexo/tags/Windows/" style="font-size: 11.82px;">Windows</a> <a href="/blog-hexo/tags/XML/" style="font-size: 10px;">XML</a> <a href="/blog-hexo/tags/YAML/" style="font-size: 10px;">YAML</a> <a href="/blog-hexo/tags/Zip/" style="font-size: 10px;">Zip</a> <a href="/blog-hexo/tags/axios/" style="font-size: 10.91px;">axios</a> <a href="/blog-hexo/tags/base64/" style="font-size: 10px;">base64</a> <a href="/blog-hexo/tags/bumpversion/" style="font-size: 10px;">bumpversion</a> <a href="/blog-hexo/tags/cookiecutter/" style="font-size: 10px;">cookiecutter</a> <a href="/blog-hexo/tags/fastjson/" style="font-size: 10px;">fastjson</a> <a href="/blog-hexo/tags/ffmpeg/" style="font-size: 10px;">ffmpeg</a> <a href="/blog-hexo/tags/grep/" style="font-size: 10px;">grep</a> <a href="/blog-hexo/tags/heatmap-js/" style="font-size: 10px;">heatmap.js</a> <a href="/blog-hexo/tags/hexdump/" style="font-size: 10px;">hexdump</a> <a href="/blog-hexo/tags/interact-js/" style="font-size: 10px;">interact.js</a> <a href="/blog-hexo/tags/libfacedetection/" style="font-size: 10px;">libfacedetection</a> <a href="/blog-hexo/tags/md5/" style="font-size: 10px;">md5</a> <a href="/blog-hexo/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/blog-hexo/tags/npm/" style="font-size: 10px;">npm</a> <a href="/blog-hexo/tags/peewee/" style="font-size: 10px;">peewee</a> <a href="/blog-hexo/tags/pip/" style="font-size: 10px;">pip</a> <a href="/blog-hexo/tags/sed/" style="font-size: 10px;">sed</a> <a href="/blog-hexo/tags/setuptools/" style="font-size: 10px;">setuptools</a> <a href="/blog-hexo/tags/vim/" style="font-size: 10px;">vim</a> <a href="/blog-hexo/tags/virtualenv/" style="font-size: 10px;">virtualenv</a> <a href="/blog-hexo/tags/xargs/" style="font-size: 10px;">xargs</a> <a href="/blog-hexo/tags/zip/" style="font-size: 10px;">zip</a> <a href="/blog-hexo/tags/【Supervisor-Linux/" style="font-size: 10px;">【Supervisor, Linux]</a> <a href="/blog-hexo/tags/个人博客/" style="font-size: 11.82px;">个人博客</a> <a href="/blog-hexo/tags/前端/" style="font-size: 10px;">前端</a> <a href="/blog-hexo/tags/对象检测/" style="font-size: 10px;">对象检测</a> <a href="/blog-hexo/tags/概率论/" style="font-size: 10px;">概率论</a> <a href="/blog-hexo/tags/正则表达式/" style="font-size: 10px;">正则表达式</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-hexo/archives/2017/05/">May 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog-hexo/2020/06/24/VSCode使用SFTP完成代码远程同步/">VSCode使用SFTP完成代码远程同步</a>
          </li>
        
          <li>
            <a href="/blog-hexo/2020/06/09/GitLab中添加代码覆盖率报告数值/">GitLab中添加代码覆盖率报告数值</a>
          </li>
        
          <li>
            <a href="/blog-hexo/2020/06/03/Axios调用post请求同时上传文件和参数/">Axios调用post请求同时上传文件和参数</a>
          </li>
        
          <li>
            <a href="/blog-hexo/2020/05/28/Laravel中添加路径参数限制规则/">Laravel中添加路径参数限制规则</a>
          </li>
        
          <li>
            <a href="/blog-hexo/2020/03/26/Shell中使用xargs批量操作文件/">Shell中使用xargs批量操作文件</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 ckmessi<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/blog-hexo/" class="mobile-nav-link">Home</a>
  
    <a href="/blog-hexo/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/blog-hexo/fancybox/jquery.fancybox.css">
  <script src="/blog-hexo/fancybox/jquery.fancybox.pack.js"></script>


<script src="/blog-hexo/js/script.js"></script>



  </div>
</body>
</html>